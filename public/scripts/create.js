(()=>{"use strict";class e{addStep(e){return this.steps.push(e),this}constructor(t,r,s=[]){this.mold=t instanceof e?()=>t.make():t,this.defaultParameters=r,this.steps=s}make(e={}){const t={...this.defaultParameters,...e},r=this.mold(t);for(const e of this.steps)e(r,t);return r}}!function(e){let t;!function(e){e.resolve=function(e,t,r){return"function"==typeof e?e(t,r):e}}(t=e.DynamicValue||(e.DynamicValue={}))}(e||(e={}));const t=e;var r;!function(e){e.apply=function(e,t){for(const r in t){const s=r;e.style[s]=t[s]}return e}}(r||(r={}));const s=r;class n extends t{copy(){return new n(this.mold,this.defaultParameters,[...this.steps])}id(e){return this.addStep(((r,s)=>r.id=String(t.DynamicValue.resolve(e,r,s))))}classes(...e){return this.addStep(((r,s)=>r.classList.add(...e.map((e=>t.DynamicValue.resolve(e,r,s))).flat(1).flatMap((e=>String(e).split(" "))))))}attribute(e,r){return this.addStep(((s,n)=>{const i=String(t.DynamicValue.resolve(e,s,n));void 0===r?s.toggleAttribute(i,!0):s.setAttribute(i,String(t.DynamicValue.resolve(r,s,n)))}))}attributes(e){return this.addStep(((r,s)=>{for(const n in e)r.setAttribute(n,String(t.DynamicValue.resolve(e[n],r,s)))}))}text(e){return this.addStep(((r,s)=>r.textContent=String(t.DynamicValue.resolve(e,r,s))))}style(e){return this.addStep(((r,n)=>{const i={};for(const s in e){const a=s;i[a]=String(t.DynamicValue.resolve(e[a],r,n))}s.apply(r,i)}))}tooltip(e){return this.addStep(((r,s)=>r.title=String(t.DynamicValue.resolve(e,r,s))))}children(...e){return this.addStep(((t,r)=>{for(const s of e){const e="function"==typeof s?s(t,r):s;e&&("string"==typeof e?t.appendChild(document.createTextNode(e)):e instanceof HTMLElement?t.appendChild(e):t.appendChild(e.make(r)))}}))}on(e,t){return this.addStep((r=>r.addEventListener(e,(e=>t(e,r)))))}once(e,t){return this.addStep((r=>r.addEventListener(e,(e=>t(e,r)),{once:!0})))}onAttributeChanged(e,t){return this.addStep((r=>new MutationObserver((s=>{for(const n of s)if("attributes"===n.type){const s=r.getAttribute(e);s!==n.oldValue&&t(s,n.oldValue,r)}})).observe(r,{attributes:!0,attributeOldValue:!0,attributeFilter:[e]})))}do(e){return this.addStep(e)}static fromTagName(e,t){return new n((()=>document.createElement(e)),void 0===t?{}:t)}}const i=n;class a extends i{copy(){return new a(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("a")),e,t)}doDownload(e){return this.addStep(((r,s)=>r.download=t.DynamicValue.resolve(e,r,s)?"true":""))}href(e){return this.addStep(((t,r)=>{const s="function"==typeof e?e(t,r):e;t.href=s instanceof URL?s.href:s}))}referrerPolicy(e){return this.addStep(((r,s)=>r.referrerPolicy=t.DynamicValue.resolve(e,r,s)))}openInNewTab(e){return this.addStep(((r,s)=>r.target=t.DynamicValue.resolve(e,r,s)?"_blank":""))}}class o extends i{copy(){return new o(this.mold,this.defaultParameters,[...this.steps])}showControls(e){return this.addStep(((r,s)=>r.controls=t.DynamicValue.resolve(e,r,s)))}doLoop(e){return this.addStep(((r,s)=>r.loop=t.DynamicValue.resolve(e,r,s)))}doMute(e){return this.addStep(((r,s)=>r.muted=t.DynamicValue.resolve(e,r,s)))}rate(e,r=!1){return this.addStep(((s,n)=>{s.playbackRate=t.DynamicValue.resolve(e,s,n),s.preservesPitch=t.DynamicValue.resolve(r,s,n)}))}src(e){return this.addStep(((t,r)=>{const s="function"==typeof e?e(t,r):e;t.src=s instanceof URL?s.href:s}))}}class c extends o{copy(){return new c(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("audio")),e,t)}}class l extends i{copy(){return new l(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("base")),e,t)}href(e){return this.addStep(((t,r)=>{const s="function"==typeof e?e(t,r):e;t.href=s instanceof URL?s.href:s}))}openInNewTab(e){return this.addStep(((r,s)=>r.target=t.DynamicValue.resolve(e,r,s)?"_blank":""))}}class u extends i{copy(){return new u(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("body")),e,t)}}class d extends i{copy(){return new d(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("br")),e,t)}}class h extends i{copy(){return new h(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("button")),e,t)}doDisable(e){return this.addStep(((r,s)=>r.disabled=t.DynamicValue.resolve(e,r,s)))}name(e){return this.addStep(((r,s)=>r.name=String(t.DynamicValue.resolve(e,r,s))))}}class m extends i{copy(){return new m(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("canvas")),e,t)}width(e){return this.addStep(((r,s)=>r.width=Math.floor(t.DynamicValue.resolve(e,r,s))))}height(e){return this.addStep(((r,s)=>r.height=Math.floor(t.DynamicValue.resolve(e,r,s))))}}class p extends i{copy(){return new p(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("data")),e,t)}value(e){return this.addStep(((r,s)=>r.value=String(t.DynamicValue.resolve(e,r,s))))}}class f extends i{copy(){return new f(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("datalist")),e,t)}options(...e){return this.children(...e)}}class E extends i{copy(){return new E(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("dialog")),e,t)}isOpen(e){return this.addStep(((r,s)=>r.open=t.DynamicValue.resolve(e,r,s)))}returnValue(e){return this.addStep(((r,s)=>r.returnValue=String(t.DynamicValue.resolve(e,r,s))))}}class g extends i{copy(){return new g(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("div")),e,t)}flex(){return this.classes("flex"),new S(this.defaultParameters,this.steps)}flexRows(){return this.classes("rows"),new y(this.defaultParameters,this.steps)}flexColumns(){return this.classes("columns"),new w(this.defaultParameters,this.steps)}}class S extends g{copy(){return new S(this.defaultParameters,[...this.steps])}spacing(e){return this.classes(((r,s)=>t.DynamicValue.resolve(e,r,s)))}wrapItems(e){return this.classes(((r,s)=>t.DynamicValue.resolve(e,r,s)?"wrap":"no-wrap"))}}class y extends S{alignItems(e){return this.classes(((r,s)=>t.DynamicValue.resolve(e,r,s)))}alignContent(e){return this.classes(((r,s)=>t.DynamicValue.resolve(e,r,s)))}}class w extends S{alignItems(e){return this.classes(((r,s)=>t.DynamicValue.resolve(e,r,s)))}alignContent(e){return this.classes(((r,s)=>t.DynamicValue.resolve(e,r,s)))}}class v extends i{copy(){return new v(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("dl")),e,t)}}class D extends i{copy(){return new D(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("embed")),e,t)}width(e){return this.addStep(((r,s)=>r.width=Math.floor(t.DynamicValue.resolve(e,r,s)).toString()))}height(e){return this.addStep(((r,s)=>r.height=Math.floor(t.DynamicValue.resolve(e,r,s)).toString()))}src(e){return this.addStep(((t,r)=>{const s="function"==typeof e?e(t,r):e;t.src=s instanceof URL?s.href:s}))}}class b extends i{copy(){return new b(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("fieldset")),e,t)}name(e){return this.addStep(((r,s)=>r.name=String(t.DynamicValue.resolve(e,r,s))))}}class R extends i{copy(){return new R(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("form")),e,t)}name(e){return this.addStep(((r,s)=>r.name=String(t.DynamicValue.resolve(e,r,s))))}method(e){return this.addStep(((r,s)=>r.method=String(t.DynamicValue.resolve(e,r,s))))}}!function(e){let t;!function(e){e.POST="post",e.GET="get",e.DIALOG="dialog"}(t=e.Method||(e.Method={}))}(R||(R={}));const N=R;class T extends i{copy(){return new T(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("head")),e,t)}}class A extends i{copy(){return new A(this.size,this.defaultParameters,[...this.steps])}constructor(e,t,r=[]){super((e=>document.createElement("h"+this.size)),t,r),this.size=e}}const O=A;class I extends i{copy(){return new I(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("hr")),e,t)}}class C extends i{copy(){return new C(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("html")),e,t)}}class L extends i{copy(){return new L(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("iframe")),e,t)}allow(e){return this.addStep(((r,s)=>r.allow=t.DynamicValue.resolve(e,r,s)))}allowFullscreen(e){return this.addStep(((r,s)=>r.allowFullscreen=t.DynamicValue.resolve(e,r,s)))}src(e){return this.addStep(((t,r)=>{const s="function"==typeof e?e(t,r):e;t.src=s instanceof URL?s.href:s}))}}class x extends i{fetchPriority(e){return this.addStep(((r,s)=>r.fetchPriority=t.DynamicValue.resolve(e,r,s)))}}!function(e){let t;!function(e){e.LOW="low",e.HIGH="high",e.AUTO="auto"}(t=e.FetchPriority||(e.FetchPriority={}))}(x||(x={}));const P=x;class V extends P{copy(){return new V(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("img")),e,t)}alt(e){return this.addStep(((r,s)=>r.alt=String(t.DynamicValue.resolve(e,r,s))))}loadingMode(e){return this.addStep(((r,s)=>r.loading=t.DynamicValue.resolve(e,r,s)))}width(e){return this.addStep(((r,s)=>r.width=Math.floor(t.DynamicValue.resolve(e,r,s))))}height(e){return this.addStep(((r,s)=>r.height=Math.floor(t.DynamicValue.resolve(e,r,s))))}src(e){return this.addStep(((t,r)=>{const s="function"==typeof e?e(t,r):e;t.src=s instanceof URL?s.href:s}))}srcset(...e){return this.addStep(((t,r)=>t.srcset=e.map((e=>"function"==typeof e?e(t,r):e)).map(String).join(",")))}sizes(...e){return this.addStep(((r,s)=>r.sizes=e.map((e=>t.DynamicValue.resolve(e,r,s))).join(",")))}}!function(e){let t;!function(e){e.EAGER="eager",e.LAZY="lazy"}(t=e.LoadingMode||(e.LoadingMode={}))}(V||(V={}));const M=V;class U extends i{copy(){return new U(this.type,this.defaultParameters,[...this.steps])}constructor(e,t,r=[]){super((()=>{const t=document.createElement("input");return t.type=e,t}),t),this.type=e}value(e){return this.addStep(((t,r)=>t.value=U.valueToString(this.type,"function"==typeof e?e(t,r):e)))}name(e){return this.addStep(((r,s)=>r.name=String(t.DynamicValue.resolve(e,r,s))))}isDisabled(e){return this.addStep(((r,s)=>r.disabled=t.DynamicValue.resolve(e,r,s)))}isRequired(e){return this.addStep(((r,s)=>r.required=t.DynamicValue.resolve(e,r,s)))}}!function(e){let t;!function(e){e.BUTTON="button",e.CHECKBOX="checkbox",e.COLOR="color",e.DATE="date",e.DATETIME_LOCAL="datetime-local",e.EMAIL="email",e.FILE="file",e.HIDDEN="hidden",e.IMAGE="image",e.MONTH="month",e.NUMBER="number",e.PASSWORD="password",e.RADIO="radio",e.RANGE="range",e.RESET="reset",e.SEARCH="search",e.SUBMIT="submit",e.TEL="tel",e.TEXT="text",e.TIME="time",e.URL="url",e.WEEK="week"}(t=e.Type||(e.Type={}));const r=Object.freeze({[t.BUTTON]:{fromString:()=>{},toString:()=>""},[t.CHECKBOX]:{fromString:e=>e,toString:e=>e},[t.COLOR]:{fromString:e=>e,toString:e=>e},[t.DATE]:{fromString:e=>{const[t,r,s]=e.split("-").map((e=>Number.parseInt(e)));return{day:s,month:r,year:t}},toString:e=>`${e.year.toString().padStart(4,"0")}-${(e.month+1).toString().padStart(2,"0")}-${e.day.toString().padStart(2,"0")}`},[t.DATETIME_LOCAL]:{fromString:e=>{const[t,r]=e.split("T"),[s,n,i]=t.split("-").map((e=>Number.parseInt(e))),[a,o]=r.split("-").map((e=>Number.parseInt(e)));return new Date(s,n-1,i,a,o)},toString:e=>{let t=e.toISOString();return t.includes(".")&&(t=t.substring(0,t.lastIndexOf("."))),t}},[t.EMAIL]:{fromString:e=>e,toString:e=>e},[t.FILE]:{fromString:e=>e,toString:e=>e},[t.HIDDEN]:{fromString:e=>e,toString:e=>e},[t.IMAGE]:{fromString:()=>{},toString:()=>""},[t.MONTH]:{fromString:e=>{const[t,r]=e.split("-").map((e=>Number.parseInt(e)));return{monthIndex:r-1,year:t}},toString:e=>`${e.year.toString().padStart(4,"0")}-${(e.monthIndex+1).toString().padStart(2,"0")}`},[t.NUMBER]:{fromString:e=>Number.parseFloat(e),toString:e=>e.toString()},[t.PASSWORD]:{fromString:e=>e,toString:e=>e},[t.RADIO]:{fromString:e=>e,toString:e=>e},[t.RANGE]:{fromString:e=>Number.parseFloat(e),toString:e=>e.toString()},[t.RESET]:{fromString:()=>{},toString:()=>""},[t.SEARCH]:{fromString:e=>e,toString:e=>e},[t.SUBMIT]:{fromString:()=>{},toString:()=>""},[t.TEL]:{fromString:e=>e,toString:e=>e},[t.TEXT]:{fromString:e=>e,toString:e=>e},[t.TIME]:{fromString:e=>{const[t,r]=e.split(":").map((e=>Number.parseInt(e)));return{hours:t,minutes:r}},toString:e=>`${e.hours.toString().padStart(2,"0")}:${e.minutes.toString().padStart(2,"0")}`},[t.URL]:{fromString:e=>new URL(e),toString:e=>e.href},[t.WEEK]:{fromString:e=>{const[t,r]=e.split("-W").map((e=>Number.parseInt(e)));return{year:t,week:r}},toString:e=>`${e.year.toString().padStart(4,"0")}-W${e.week.toString().padStart(2,"0")}`}});e.valueToString=function(e,t){return r[e].toString(t)},e.valueFromString=function(e,t){return r[e].fromString(t)},e.DEFAULT_CREATORS=Object.freeze({[t.BUTTON]:e=>new _(t.BUTTON,e),[t.CHECKBOX]:e=>new k(t.CHECKBOX,e),[t.COLOR]:r=>new e(t.COLOR,r),[t.DATE]:e=>new G(t.DATE,e),[t.DATETIME_LOCAL]:e=>new G(t.DATETIME_LOCAL,e),[t.EMAIL]:e=>new z(t.EMAIL,e),[t.FILE]:e=>new z(t.FILE,e),[t.HIDDEN]:e=>new z(t.HIDDEN,e),[t.IMAGE]:e=>new F(e),[t.MONTH]:e=>new G(t.MONTH,e),[t.NUMBER]:e=>new G(t.NUMBER,e),[t.PASSWORD]:e=>new z(t.PASSWORD,e),[t.RADIO]:e=>new k(t.RADIO,e),[t.RANGE]:e=>new G(t.RANGE,e),[t.RESET]:e=>new _(t.RESET,e),[t.SEARCH]:e=>new z(t.SEARCH,e),[t.SUBMIT]:e=>new _(t.SUBMIT,e),[t.TEL]:e=>new z(t.TEL,e),[t.TEXT]:e=>new z(t.TEXT,e),[t.TIME]:e=>new G(t.TIME,e),[t.URL]:e=>new z(t.URL,e),[t.WEEK]:e=>new G(t.WEEK,e)}),e.fromType=function(t,r){return e.DEFAULT_CREATORS[t](r)}}(U||(U={}));const H=U;class _ extends U{copy(){return new _(this.type,this.defaultParameters,[...this.steps])}constructor(e,t,r=[]){super(e,t,r)}text(e){return this.addStep(((r,s)=>r.value=String(t.DynamicValue.resolve(e,r,s))))}}class F extends U{copy(){return new F(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super(U.Type.IMAGE,e,t)}src(e){return this.addStep(((t,r)=>t.src=String("function"==typeof e?e(t,r):e)))}}class z extends U{copy(){return new z(this.type,this.defaultParameters,[...this.steps])}text(e){return this.addStep(((t,r)=>t.value=String("function"==typeof e?e(t,r):e)))}placeholder(e){return this.addStep(((r,s)=>r.placeholder=String(t.DynamicValue.resolve(e,r,s))))}pattern(e){return this.addStep(((t,r)=>t.pattern=("function"==typeof e?e(t,r):e).source))}minLength(e){return this.addStep(((r,s)=>r.minLength=Math.floor(t.DynamicValue.resolve(e,r,s))))}maxLength(e){return this.addStep(((r,s)=>r.maxLength=Math.floor(t.DynamicValue.resolve(e,r,s))))}}class k extends U{copy(){return new k(this.type,this.defaultParameters,[...this.steps])}isChecked(e){return this.addStep(((r,s)=>r.checked=t.DynamicValue.resolve(e,r,s)))}}class G extends U{copy(){return new G(this.type,this.defaultParameters,[...this.steps])}min(e){return this.addStep(((t,r)=>t.min=U.valueToString(this.type,"function"==typeof e?e(t,r):e)))}max(e){return this.addStep(((t,r)=>t.max=U.valueToString(this.type,"function"==typeof e?e(t,r):e)))}step(e){return this.addStep(((r,s)=>r.step=t.DynamicValue.resolve(e,r,s).toString()))}placeholder(e){return this.addStep(((r,s)=>r.placeholder=String(t.DynamicValue.resolve(e,r,s))))}}class j extends i{copy(){return new j(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("label")),e,t)}for(e){return this.addStep(((t,r)=>{const s="function"==typeof e?e(t,r):e;t.id=s instanceof Element?s.id:String(s)}))}}class W extends i{copy(){return new W(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("legend")),e,t)}}class B extends i{copy(){return new B(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("li")),e,t)}}class K extends P{copy(){return new K(this.relationship,this.defaultParameters,[...this.steps])}constructor(e,t,r=[]){super((()=>{const t=document.createElement("link");return t.rel=e,t}),t,r),this.relationship=e}href(e){return this.addStep(((t,r)=>{const s="function"==typeof e?e(t,r):e;t.href=s instanceof URL?s.href:s}))}type(e){return this.addStep(((r,s)=>r.type=t.DynamicValue.resolve(e,r,s)))}media(e){return this.addStep(((t,r)=>{const s="function"==typeof e?e(t,r):e;t.media=s.toString()}))}}!function(e){let t;!function(e){e.ALTERNATE="alternate",e.AUTHOR="author",e.CANONICAL="canonical",e.DNS_PREFETCH="dns-prefetch",e.EXPECT="expect",e.HELP="help",e.ICON="icon",e.LICENSE="license",e.MANIFEST="manifest",e.ME="me",e.MODULE_PRELOAD="modulepreload",e.NEXT="next",e.PING_BACK="pingback",e.PRECONNECT="preconnect",e.PREFETCH="prefetch",e.PRELOAD="preload",e.PRERENDER="prerender",e.PREV="prev",e.PRIVACY_POLICY="privacy-policy",e.SEARCH="search",e.STYLESHEET="stylesheet",e.TERMS_OF_SERVICE="terms-of-service"}(t=e.Relationship||(e.Relationship={})),e.DEFAULT_CREATORS=Object.freeze({[t.ALTERNATE]:r=>new e(t.ALTERNATE,r),[t.AUTHOR]:r=>new e(t.AUTHOR,r),[t.CANONICAL]:r=>new e(t.CANONICAL,r),[t.DNS_PREFETCH]:r=>new e(t.DNS_PREFETCH,r),[t.EXPECT]:r=>new e(t.EXPECT,r),[t.HELP]:r=>new e(t.HELP,r),[t.ICON]:r=>new e(t.ICON,r),[t.LICENSE]:r=>new e(t.LICENSE,r),[t.MANIFEST]:r=>new e(t.MANIFEST,r),[t.ME]:r=>new e(t.ME,r),[t.MODULE_PRELOAD]:e=>new Y(t.MODULE_PRELOAD,e),[t.NEXT]:r=>new e(t.NEXT,r),[t.PING_BACK]:r=>new e(t.PING_BACK,r),[t.PRECONNECT]:r=>new e(t.PRECONNECT,r),[t.PREFETCH]:r=>new e(t.PREFETCH,r),[t.PRELOAD]:e=>new Y(t.PRELOAD,e),[t.PRERENDER]:r=>new e(t.PRERENDER,r),[t.PREV]:r=>new e(t.PREV,r),[t.PRIVACY_POLICY]:r=>new e(t.PRIVACY_POLICY,r),[t.SEARCH]:r=>new e(t.SEARCH,r),[t.STYLESHEET]:r=>new e(t.STYLESHEET,r),[t.TERMS_OF_SERVICE]:r=>new e(t.TERMS_OF_SERVICE,r)})}(K||(K={}));const $=K;class Y extends K{copy(){return new Y(this.relationship,this.defaultParameters,[...this.steps])}as(e){return this.addStep(((r,s)=>r.as=t.DynamicValue.resolve(e,r,s)))}}!function(e){let t;!function(e){e.AUDIO="audio",e.DOCUMENT="document",e.EMBED="embed",e.FETCH="fetch",e.FONT="font",e.IMAGE="image",e.OBJECT="object",e.SCRIPT="script",e.STYLE="style",e.TRACK="track",e.VIDEO="video",e.WORKER="worker"}(t=e.ContentType||(e.ContentType={}))}(Y||(Y={}));class X extends i{copy(){return new X(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("menu")),e,t)}}class q extends i{copy(){return new q(this.name,this.defaultParameters,[...this.steps])}constructor(e,t,r=[]){super((()=>{const t=document.createElement("meta");return t.name=e,t}),t,r),this.name=e}content(e){return this.addStep(((r,s)=>r.content=[t.DynamicValue.resolve(e,r,s)].flat().join(",")))}}!function(e){let t,r;!function(e){e.AUTHOR="author",e.DESCRIPTION="description",e.GENERATOR="generator",e.KEYWORDS="keywords",e.REFERRER="referrer",e.THEME_COLOR="theme-color"}(t=e.Name||(e.Name={})),function(e){e.ORIGIN="origin",e.NO_REFERRER_WHEN_DOWNGRADE="no-referrer-when-downgrade",e.ORIGIN_WHEN_CROSS_ORIGIN="origin-when-cross-origin",e.SAME_ORIGIN="same-origin",e.STRICT_ORIGIN="strict-origin",e.STRICT_ORIGIN_WHEN_CROSS_ORIGIN="strict-origin-when-cross-origin",e.UNSAFE_URL="unsafe-URL"}(r||(r={})),e.DEFAULT_CREATORS=Object.freeze({[t.AUTHOR]:r=>new e(t.AUTHOR,r),[t.DESCRIPTION]:r=>new e(t.DESCRIPTION,r),[t.GENERATOR]:r=>new e(t.GENERATOR,r),[t.KEYWORDS]:r=>new e(t.KEYWORDS,r),[t.REFERRER]:r=>new e(t.REFERRER,r),[t.THEME_COLOR]:r=>new e(t.THEME_COLOR,r)})}(q||(q={}));const Z=q;class J extends i{copy(){return new J(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("meter")),e,t)}high(e){return this.addStep(((r,s)=>r.high=t.DynamicValue.resolve(e,r,s)))}low(e){return this.addStep(((r,s)=>r.low=t.DynamicValue.resolve(e,r,s)))}min(e){return this.addStep(((r,s)=>r.min=t.DynamicValue.resolve(e,r,s)))}max(e){return this.addStep(((r,s)=>r.max=t.DynamicValue.resolve(e,r,s)))}optimum(e){return this.addStep(((r,s)=>r.optimum=t.DynamicValue.resolve(e,r,s)))}value(e){return this.addStep(((r,s)=>r.value=t.DynamicValue.resolve(e,r,s)))}}class Q extends i{copy(){return new Q(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("object")),e,t)}name(e){return this.addStep(((r,s)=>r.name=t.DynamicValue.resolve(e,r,s)))}data(e){return this.addStep(((t,r)=>{const s="function"==typeof e?e(t,r):e;t.data=s instanceof URL?s.href:s}))}type(e){return this.addStep(((r,s)=>r.type=t.DynamicValue.resolve(e,r,s)))}width(e){return this.addStep(((r,s)=>r.width=Math.floor(t.DynamicValue.resolve(e,r,s)).toString()))}height(e){return this.addStep(((r,s)=>r.height=Math.floor(t.DynamicValue.resolve(e,r,s)).toString()))}}class ee extends i{copy(){return new ee(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("optgroup")),e,t)}isDisabled(e){return this.addStep(((r,s)=>r.disabled=t.DynamicValue.resolve(e,r,s)))}label(e){return this.addStep(((r,s)=>r.label=t.DynamicValue.resolve(e,r,s)))}options(...e){return this.children(...e)}}class te extends i{copy(){return new te(this.value,this.defaultParameters,[...this.steps])}constructor(e,t,r=[]){super((()=>{const t=document.createElement("option");return t.value=t.text=e,t}),t,r),this.value=e}text(e){return this.addStep(((r,s)=>r.text=String(t.DynamicValue.resolve(e,r,s))))}}class re extends i{copy(){return new re(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("ol")),e,t)}isReversed(e){return this.addStep(((r,s)=>r.reversed=t.DynamicValue.resolve(e,r,s)))}start(e){return this.addStep(((r,s)=>r.start=t.DynamicValue.resolve(e,r,s)))}type(e){return this.addStep(((r,s)=>r.type=t.DynamicValue.resolve(e,r,s)))}}!function(e){let t;!function(e){e.DECIMAL_NUMBERS="1",e.LOWERCASE_LETTERS="a",e.UPPERCASE_LETTERS="A",e.LOWERCASE_ROMAN_NUMERALS="i",e.UPPERCASE_ROMAN_NUMERALS="I"}(t=e.Type||(e.Type={}))}(re||(re={}));const se=re;class ne extends i{copy(){return new ne(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("output")),e,t)}name(e){return this.addStep(((r,s)=>r.name=t.DynamicValue.resolve(e,r,s)))}value(e){return this.addStep(((r,s)=>r.value=t.DynamicValue.resolve(e,r,s)))}for(...e){return this.addStep(((t,r)=>t.setAttribute("for",e.map((e=>"function"==typeof e?e(t,r):e)).map((e=>e instanceof Element?e.id:e)).join(" "))))}}class ie extends i{copy(){return new ie(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("p")),e,t)}}class ae extends i{copy(){return new ae(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("picture")),e,t)}}class oe extends i{copy(){return new oe(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("pre")),e,t)}}class ce{static clamp(e,t=-1/0,r=1/0){return e<t?t:e>r?r:e}static absDiff(e,t){return Math.abs(e-t)}static degToRad(e){return e/360*Math.PI*2}static radToDeg(e){return e/Math.PI/2*360}}class le extends i{copy(){return new le(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("progress")),e,t)}max(e){return this.addStep(((r,s)=>r.max=Math.max(0,t.DynamicValue.resolve(e,r,s))))}value(e){return this.addStep(((r,s)=>r.value=ce.clamp(t.DynamicValue.resolve(e,r,s),0,r.max)))}}class ue extends P{copy(){return new ue(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("script")),e,t)}isAsync(e){return this.addStep(((r,s)=>r.async=t.DynamicValue.resolve(e,r,s)))}src(e){return this.addStep(((t,r)=>{const s="function"==typeof e?e(t,r):e;t.src=s instanceof URL?s.href:s}))}type(e){return this.addStep(((r,s)=>r.type=t.DynamicValue.resolve(e,r,s)))}}!function(e){let t;!function(e){e.DEFAULT="",e.IMPORT_MAP="importmap",e.MODULE="module",e.DATA="data"}(t=e.Type||(e.Type={}))}(ue||(ue={}));const de=ue;class he extends i{copy(){return new he(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("select")),e,t)}isDisabled(e){return this.addStep(((r,s)=>r.disabled=t.DynamicValue.resolve(e,r,s)))}isRequired(e){return this.addStep(((r,s)=>r.required=t.DynamicValue.resolve(e,r,s)))}name(e){return this.addStep(((r,s)=>r.name=t.DynamicValue.resolve(e,r,s)))}options(...e){return this.addStep(((t,r)=>e.forEach((e=>t.add(e.make(r))))))}value(e){return this.addStep(((r,s)=>r.value=t.DynamicValue.resolve(e,r,s)))}onValueChanged(e){return this.on("change",((t,r)=>e(r.value,t,r)))}onceValueChanged(e){return this.once("change",((t,r)=>e(r.value,t,r)))}}class me extends i{copy(){return new me(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("source")),e,t)}type(e){return this.addStep(((r,s)=>r.type=t.DynamicValue.resolve(e,r,s)))}width(e){return this.addStep(((r,s)=>r.width=Math.floor(t.DynamicValue.resolve(e,r,s))))}height(e){return this.addStep(((r,s)=>r.height=Math.floor(t.DynamicValue.resolve(e,r,s))))}src(e){return this.addStep(((t,r)=>{const s="function"==typeof e?e(t,r):e;t.src=s instanceof URL?s.href:s}))}srcset(...e){return this.addStep(((t,r)=>t.srcset=e.map((e=>"function"==typeof e?e(t,r):e)).map(String).join(",")))}sizes(...e){return this.addStep(((r,s)=>r.sizes=e.map((e=>t.DynamicValue.resolve(e,r,s))).join(",")))}}const pe=me;class fe extends i{copy(){return new fe(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("span")),e,t)}}class Ee extends i{copy(){return new Ee(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("style")),e,t)}idDisabled(e){return this.addStep(((r,s)=>r.disabled=t.DynamicValue.resolve(e,r,s)))}media(e){return this.addStep(((t,r)=>{const s="function"==typeof e?e(t,r):e;t.media=s.toString()}))}}class ge extends i{copy(){return new ge(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("table")),e,t)}caption(e){return this.addStep(((r,s)=>{const n=document.createElement("caption");n.textContent=t.DynamicValue.resolve(e,r,s),r.caption=n}))}}class Se extends i{copy(){return new Se(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("caption")),e,t)}}class ye extends i{copy(){return new ye(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("textarea")),e,t)}isDisabled(e){return this.addStep(((r,s)=>r.disabled=t.DynamicValue.resolve(e,r,s)))}isRequired(e){return this.addStep(((r,s)=>r.required=t.DynamicValue.resolve(e,r,s)))}name(e){return this.addStep(((r,s)=>r.name=String(t.DynamicValue.resolve(e,r,s))))}text(e){return this.addStep(((r,s)=>r.value=String(t.DynamicValue.resolve(e,r,s))))}numRows(e){return this.addStep(((r,s)=>r.rows=Math.floor(t.DynamicValue.resolve(e,r,s))))}numColumns(e){return this.addStep(((r,s)=>r.rows=Math.floor(t.DynamicValue.resolve(e,r,s))))}minLength(e){return this.addStep(((r,s)=>r.minLength=Math.floor(t.DynamicValue.resolve(e,r,s))))}maxLength(e){return this.addStep(((r,s)=>r.maxLength=Math.floor(t.DynamicValue.resolve(e,r,s))))}}class we extends i{copy(){return new we(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("title")),e,t)}text(e){return this.addStep(((r,s)=>r.text=String(t.DynamicValue.resolve(e,r,s))))}}class ve extends i{copy(){return new ve(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("track")),e,t)}src(e){return this.addStep(((t,r)=>{const s="function"==typeof e?e(t,r):e;t.src=s instanceof URL?s.href:s}))}isDefault(e){return this.addStep(((r,s)=>r.default=t.DynamicValue.resolve(e,r,s)))}kind(e){return this.addStep(((r,s)=>r.kind=t.DynamicValue.resolve(e,r,s)))}label(e){return this.addStep(((r,s)=>r.label=t.DynamicValue.resolve(e,r,s)))}sourceLanguage(e){return this.addStep(((t,r)=>{const s="function"==typeof e?e(t,r):e;t.srclang="string"==typeof s?s:s.language}))}}!function(e){let t;!function(e){e.SUBTITLES="subtitles",e.CAPTIONS="captions",e.CHAPTERS="chapters",e.METADATA="metadata"}(t=e.Kind||(e.Kind={}))}(ve||(ve={}));const De=ve;class be extends i{copy(){return new be(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("ul")),e,t)}type(e){return this.style({listStyleType:e})}}!function(e){let t;!function(e){e.NONE="none",e.DISC="disc",e.CIRCLE="circle",e.SQUARE="square",e.DECIMAL="decimal"}(t=e.Type||(e.Type={}))}(be||(be={}));const Re=be;class Ne extends o{copy(){return new Ne(this.defaultParameters,[...this.steps])}constructor(e,t=[]){super((()=>document.createElement("video")),e,t)}isPIPDisabled(e){return this.addStep(((r,s)=>r.disablePictureInPicture=t.DynamicValue.resolve(e,r,s)))}}class Te{constructor(){this.input=H.DEFAULT_CREATORS,this.link=$.DEFAULT_CREATORS,this.meta=Z.DEFAULT_CREATORS}a(e,t,r){let s=new a(e);return void 0!==t&&(s=s.href(t)),void 0!==r&&(s=s.openInNewTab(r)),s}audio(e,t,r){let s=new c(e);return void 0!==t&&(s=s.src(t)),void 0!==r&&(s=s.doLoop(r)),s}base(e,t,r){let s=new l(e);return void 0!==t&&(s=s.href(t)),void 0!==r&&(s=s.openInNewTab(r)),s}body(e){return new u(e)}br(e){return new d(e)}button(e,t,r){let s=new h(e);return void 0!==t&&(s=s.on("click",t)),void 0!==r&&(s=s.doDisable(r)),s}canvas(e,t,r){let s=new m(e);return void 0!==t&&(s=s.width(t)),void 0!==r&&(s=s.height(r)),s}data(e,t){let r=new p(e);return void 0!==t&&(r=r.value(t)),r}datalist(e,...t){let r=new f(e);return t&&(r=r.options(...t)),r}dialog(e,t){let r=new E(e);return void 0!==t&&(r=r.isOpen(t)),r}div(e,t,...r){let s=new g(e);return void 0!==t&&(s=s.id(t)),r&&(s=s.classes(...r)),s}dl(e){return new v(e)}embed(e){return new D(e)}fieldset(e,t){let r=new b(e);return void 0!==t&&(r=r.name(t)),r}form(e,t,r){let s=new N(e);return void 0!==t&&s.name(t),void 0!==r&&s.method(r),s}head(e){return new T(e)}h1(e,t){let r=new O(1,e);return void 0!==t&&(r=r.text(t)),r}h2(e,t){let r=new O(2,e);return void 0!==t&&(r=r.text(t)),r}h3(e,t){let r=new O(3,e);return void 0!==t&&(r=r.text(t)),r}h4(e,t){let r=new O(4,e);return void 0!==t&&(r=r.text(t)),r}h5(e,t){let r=new O(5,e);return void 0!==t&&(r=r.text(t)),r}h6(e,t){let r=new O(6,e);return void 0!==t&&(r=r.text(t)),r}hr(e){return new I(e)}html(e){return new C(e)}iframe(e,t){let r=new L(e);return void 0!==t&&(r=r.src(t)),r}img(e,t,r){let s=new M(e);return void 0!==t&&(s=s.src(t)),void 0!==r&&(s=s.alt(r)),s}label(e,t){let r=new j(e);return void 0!==t&&(r=r.for(t)),r}legend(e){return new W(e)}li(e){return new B(e)}menu(e){return new X(e)}meter(e){return new J(e)}object(e,t,r){let s=new Q(e);return void 0!==t&&(s=s.type(t)),void 0!==r&&(s=s.data(r)),s}optgroup(e,t,...r){let s=new ee(e);return void 0!==t&&(s=s.label(t)),s.options(...r)}option(e,t,r){let s=new te(t,e);return void 0!==r&&(s=s.text(r)),s}ol(e,t,r){let s=new se(e);return void 0!==t&&(s=s.type(t)),void 0!==r&&(s=s.isReversed(r)),s}output(e,t,...r){let s=new ne(e);return void 0!==t&&(s=s.value(t)),r&&(s=s.for(...r)),s}p(e,t){let r=new ie(e);return void 0!==t&&(r=r.text(t)),r}picture(e){return new ae(e)}pre(e){return new oe(e)}progress(e,t,r){let s=new le(e);return void 0!==t&&(s=s.value(t)),void 0!==r&&(s=s.max(r)),s}script(e,t,r){let s=new de(e);return void 0!==t&&(s=s.type(t)),void 0!==r&&(s=s.src(r)),s}select(e,...t){return new he(e).options(...t)}source(e,t,r){let s=new pe(e);return void 0!==t&&(s=s.type(t)),void 0!==r&&(s=s.src(r)),s}span(e,t){let r=new fe(e);return void 0!==t&&(r=r.style(t)),r}style(e){return new Ee(e)}table(e){return new ge(e)}caption(e){return new Se(e)}textarea(e,t){let r=new ye(e);return void 0!==t&&(r=r.text(t)),r}title(e,t){let r=new we(e);return void 0!==t&&(r=r.text(t)),r}track(e,t,r){let s=new De(e);return void 0!==t&&(s=s.kind(t)),void 0!==r&&(s=s.src(r)),s}ul(e,t){let r=new Re(e);return void 0!==t&&(r=r.type(t)),r}video(e){return new Ne(e)}}Te.INSTANCE=new Te;const Ae=Te;class Oe extends Error{constructor(e){e=e?.trim(),super(e?"missing attribute: "+e:"missing attribute")}}var Ie;!function(e){e.cast=function(e,t){return r=>{if(!e(r))throw new TypeError(t?`value ${r} is not of type ${t}`:`value ${r} is of an invalid type`);return r}}}(Ie||(Ie={}));const Ce=Ie,Le=/^-?[0-9]+(\.[0-9]+)?(e-?[0-9]+)?$/;var xe,Pe;function Ve(e){return(t,r)=>r.addInitializer((function(){Reflect.defineProperty(this,r.name,{configurable:!1,get:()=>this.hasAttribute(e),set:t=>this.toggleAttribute(e,t)})}))}function Me(e,t,r){return t.toString!==Object.prototype.toString&&t.toString!==Object.toString||(t.toString=String),(s,n)=>n.addInitializer((function(){const s=Reflect.get(this,n.name);Reflect.defineProperty(this,n.name,{configurable:!1,get:()=>{const s=this.getAttribute(e);if(void 0===r&&null===s)throw new Oe(e);return null===s?r:t.fromString(s)},set:r=>{null===r?this.removeAttribute(e):this.setAttribute(e,t.toString(r))}}),this.addEventListener("beforeinit",(()=>{this.hasAttribute(e)||Reflect.set(this,n.name,s)}))}))}function Ue(e,t,r){return Me(e,{fromString:Ce.cast(function(e){const t=Object.keys(e).filter((e=>!Le.test(e))).map((t=>e[t]));return e=>t.includes(e)}(t))},r)}function He(e){const t=Object.values(e);return(e,r)=>r.addInitializer((function(){const e=Reflect.get(this,r.name);Reflect.defineProperty(this,r.name,{configurable:!1,get:()=>new Set(t.filter((e=>this.classList.contains(e)))),set:e=>t.forEach((t=>this.classList.toggle(t,e.has(t))))}),this.addEventListener("beforeinit",(()=>{t.some((e=>this.classList.contains(e)))||Reflect.set(this,r.name,e)}))}))}!function(e){e[e.PENDING=0]="PENDING",e[e.INITIALIZED=1]="INITIALIZED",e[e.FAILED=2]="FAILED"}(Pe||(Pe={}));class _e extends HTMLElement{constructor(){super(...arguments),this.initState=Pe.PENDING,this.initResolvers=new Set,this.initRejectors=new Set}static loadStylesheet(e){return this.loadedTagNames.has(e)?Promise.resolve():new Promise(((t,r)=>{const s=document.createElement("link");s.rel="stylesheet",s.addEventListener("load",(()=>t())),s.addEventListener("error",r),s.href=xe.getStyleSheetHref(e),window.addEventListener("DOMContentLoaded",(()=>document.head.appendChild(s)))}))}onceInitialized(){const{promise:e,resolve:t,reject:r}=Promise.withResolvers();switch(this.initState){case Pe.PENDING:this.initResolvers.add(t),this.initRejectors.add(r);break;case Pe.INITIALIZED:t(this);break;case Pe.FAILED:r(this.initErr)}return e}connectedCallback(){this.dispatchEvent(new Event("beforeinit")),(this.initElement()??Promise.resolve()).then((()=>{for(const e of this.initResolvers)e(this);this.initState=Pe.INITIALIZED})).catch((e=>{this.initErr=e;for(const e of this.initRejectors)e(this.initErr);this.initState=Pe.FAILED})).finally((()=>{this.initResolvers.clear(),this.initRejectors.clear()}))}initElement(){console.warn("initElement method is not overridden for "+this.constructor.name)}on(e,t){return this.addEventListener(e,(e=>t(e,this))),this}once(e){return new Promise((t=>{this.addEventListener(e,(e=>t([e,this])),{once:!0})}))}onAttributeChanged(e,t,r=!1){if("string"==typeof e)new MutationObserver((r=>{for(const s of r)if("attributes"===s.type){const r=this.getAttribute(e);r!==s.oldValue&&t(r,s.oldValue,this)}})).observe(this,{attributes:!0,attributeOldValue:!0,attributeFilter:[e]}),r&&t(this.getAttribute(e),null,this);else for(const s of e)this.onAttributeChanged(s,t,r)}static getStyleSheetHref(e){if(!this.CUSTOM_TAG_NAME_REGEX.test(e))throw new SyntaxError(`name "${e}" does not match ${this.CUSTOM_TAG_NAME_REGEX}`);return`/styles/custom-elements/${e}.css`}}xe=_e,_e.loadedTagNames=new Set,(()=>{const e=customElements.define.bind(customElements);customElements.define=(t,r,s)=>{let n=r;for(;n;){if(n===xe){xe.loadStylesheet(t).then((()=>console.info(`Loaded stylesheet for "${t}"`))).catch((()=>console.warn(`Failed to load stylesheet for "${t}". Make sure to have a CSS stylesheet at ${xe.getStyleSheetHref(t)}`))).finally((()=>xe.loadedTagNames.add(t)));break}n=Object.getPrototypeOf(n)}return e(t,r,s)}})(),_e.CUSTOM_TAG_NAME_REGEX=/^[a-z]+(-[a-z]+)*$/,_e||(_e={});const Fe=_e;class ze{constructor(e,t){this.x=e,this.y=t}add(e){return new ze(this.x+e.x,this.y+e.y)}sub(e){return new ze(this.x-e.x,this.y-e.y)}mult(e,t=ze.VectorMultKind.HADAMARD){switch(t){case ze.VectorMultKind.DOT:return this.x*e.x+this.y*e.y;case ze.VectorMultKind.HADAMARD:return new ze(this.x*e.x,this.y*e.y);default:throw new Error("invalid vector multiplication type: "+t)}}div(e){return new ze(this.x/e.x,this.y/e.y)}scale(e){return new ze(this.x*e,this.y*e)}magnitude(){return Math.sqrt(this.mult(this,ze.VectorMultKind.DOT))}normalized(){return this.copy().scale(1/this.magnitude())}heading(){return Math.atan2(this.y,this.x)}rotate(e){return ze.fromPolar(this.heading()+e,this.magnitude())}equals(e){return this.x===e.x&&this.y===e.y}copy(){return new ze(this.x,this.y)}static fromPoint(e){return new ze(e.x,e.y)}static fromPolar(e,t){return new ze(Math.cos(e)*t,Math.sin(e)*t)}}ze.ZERO=new ze(0,0),function(e){let t;!function(e){e[e.DOT=0]="DOT",e[e.HADAMARD=1]="HADAMARD"}(t=e.VectorMultKind||(e.VectorMultKind={}))}(ze||(ze={}));const ke=ze;class Ge{get area(){return this.width*this.height}constructor(e,t){this.width=e,this.height=t}scale(e){return new Ge(this.width*e,this.height*e)}mult(e){return new Ge(this.width*e.width,this.height*e.height)}div(e){return new Ge(this.width/e.width,this.height/e.height)}abs(){return new Ge(Math.abs(this.width),Math.abs(this.height))}getCorner(){return new ke(this.width,this.height)}equals(e){return this.width===e.width&&this.height===e.height}copy(){return new Ge(this.width,this.height)}static fromSize(e){return new Ge(e.width,e.height)}static fromCorner(e){return new Ge(e.x,e.y)}}class je{constructor(e,t){this.center=e,this.dim=t}get left(){return this.center.x-this.dim.width/2}get right(){return this.center.x+this.dim.width/2}get top(){return this.center.y-this.dim.height/2}get bottom(){return this.center.y+this.dim.height/2}get topLeft(){return new ke(this.left,this.top)}get topRight(){return new ke(this.right,this.top)}get bottomLeft(){return new ke(this.left,this.bottom)}get bottomRight(){return new ke(this.right,this.bottom)}contains(e){return e.x>=this.left&&e.x<=this.right&&e.y>=this.top&&e.y<=this.bottom}clamp(e){return new ke(ce.clamp(e.x,this.left,this.right),ce.clamp(e.y,this.top,this.bottom))}projectOntoPerimeter(e){return new ke(e.x<this.center.x?this.left:this.right,e.y<this.center.y?this.top:this.bottom)}copy(){return new je(this.center.copy(),this.dim.copy())}static fromCorners(e,t){const r=new ke(Math.min(e.x,t.x),Math.min(e.y,t.y)),s=new ke(Math.max(e.x,t.x),Math.max(e.y,t.y));return new je(r.add(s).scale(.5),Ge.fromCorner(s.sub(r)))}static fromElement(e){const t=e.getBoundingClientRect();return new je(new ke(t.x+t.width/2,t.y+t.height/2),Ge.fromSize(t))}}class We extends je{constructor(e,t,r){super(e,t),this.rotation=r}get topLeft(){return this.toGlobalSpace({x:-.5,y:-.5})}get topRight(){return this.toGlobalSpace({x:.5,y:-.5})}get bottomLeft(){return this.toGlobalSpace({x:-.5,y:.5})}get bottomRight(){return this.toGlobalSpace({x:.5,y:.5})}toLocalSpace(e){return ke.fromPoint(e).sub(this.center).rotate(-this.rotation).div(this.dim.getCorner())}toGlobalSpace(e){return ke.fromPoint(e).mult(this.dim.getCorner()).rotate(this.rotation).add(this.center)}copy(){return new We(this.center.copy(),this.dim.copy(),this.rotation)}}var Be=function(e,t,r,s,n,i){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,c=s.kind,l="getter"===c?"get":"setter"===c?"set":"value",u=!t&&e?s.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,s.name):{}),h=!1,m=r.length-1;m>=0;m--){var p={};for(var f in s)p[f]="access"===f?{}:s[f];for(var f in s.access)p.access[f]=s.access[f];p.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(e||null))};var E=(0,r[m])("accessor"===c?{get:d.get,set:d.set}:d[l],p);if("accessor"===c){if(void 0===E)continue;if(null===E||"object"!=typeof E)throw new TypeError("Object expected");(o=a(E.get))&&(d.get=o),(o=a(E.set))&&(d.set=o),(o=a(E.init))&&n.unshift(o)}else(o=a(E))&&("field"===c?n.unshift(o):d[l]=o)}u&&Object.defineProperty(u,s.name,d),h=!0},Ke=function(e,t,r){for(var s=arguments.length>2,n=0;n<t.length;n++)r=s?t[n].call(e,r):t[n].call(e);return s?r:void 0};const $e=Ae.INSTANCE;let Ye=(()=>{var e;let t,r,s=Fe,n=[],i=[],a=[],o=[];return e=class extends s{constructor(){super(),this.transform=new We(new ke(0,0),new Ge(.25,.25),0),this.isControlsVisible=Ke(this,n,!1),this.lockAspectRatio=(Ke(this,i),Ke(this,a,!1)),Ke(this,o)}initElement(){this.toggleAttribute("transformable",!0),this.refreshCSSVars();let t=!1,r=!1,s=ke.ZERO;window.addEventListener("mousedown",(n=>{t=!0,s=e.getMouseOffset(n,this).div(e.CANVAS_BOUNDS.dim.getCorner()).mult(this.transform.dim.getCorner()),this.isControlsVisible=n.target instanceof Node&&this.contains(n.target),r=n.target===this})),window.addEventListener("mousemove",(n=>{r&&t&&(this.transform.center=e.CANVAS_BOUNDS.clamp(e.getMouseOffset(n,this.parentElement).sub(s)),this.dispatchEvent(new Event("move")),this.refreshCSSVars())})),window.addEventListener("mouseup",(()=>t=!1));const n=$e.div({widthDir:e.WidthResizeDir.NONE,heightDir:e.HeightResizeDir.NONE},void 0,"resize-handle").attribute("width-resize-dir",((e,t)=>t.widthDir)).attribute("height-resize-dir",((e,t)=>t.heightDir)).on("mousedown",((e,t)=>{t.toggleAttribute("selected",!0),document.body.style.cursor=t.style.cursor,this.style.cursor=t.style.cursor})).do((e=>window.addEventListener("mouseup",(()=>{e.removeAttribute("selected"),document.body.style.cursor="",this.style.cursor=""})))).do(((t,r)=>window.addEventListener("mousemove",(s=>{if(t.hasAttribute("selected")){const t=e.CANVAS_BOUNDS.clamp(e.getMouseOffset(s,this.parentElement)),n=this.transform.toLocalSpace(t),i=ke.ZERO.copy();r.widthDir===e.WidthResizeDir.LEFT?(i.x=.5,n.x=Math.min(n.x,i.x-e.MIN_WIDTH/this.transform.dim.width)):r.widthDir===e.WidthResizeDir.RIGHT&&(i.x=-.5,n.x=Math.max(n.x,i.x+e.MIN_WIDTH/this.transform.dim.width)),r.heightDir===e.HeightResizeDir.UP?(i.y=.5,n.y=Math.min(n.y,i.y-e.MIN_HEIGHT/this.transform.dim.height)):r.heightDir===e.HeightResizeDir.DOWN&&(i.y=-.5,n.y=Math.max(n.y,i.y+e.MIN_HEIGHT/this.transform.dim.height));const a=this.transform.dim.width/this.transform.dim.height,o=je.fromCorners(i,n);r.widthDir===e.WidthResizeDir.NONE?(o.dim.width=this.lockAspectRatio?o.dim.height*a:1,o.center.x=0):r.heightDir===e.HeightResizeDir.NONE&&(o.dim.height=this.lockAspectRatio?o.dim.width/a:1,o.center.y=0);const c=this.transform.toGlobalSpace(o.center);e.CANVAS_BOUNDS.clamp(c),this.transform.rotation=this.transform.rotation,this.transform.center=c,this.transform.dim=o.dim.mult(this.transform.dim),this.dispatchEvent(new Event("resize")),this.refreshCSSVars()}})))).do(((t,r)=>this.addEventListener("rotate",(()=>{const s=e.getHeading(r.widthDir,r.heightDir)+this.transform.rotation,n=Math.round(s/(Math.PI/4)+4)%4;t.style.cursor=["ew-resize","nwse-resize","ns-resize","nesw-resize"][n]}))));this.append(n.make({widthDir:e.WidthResizeDir.LEFT,heightDir:e.HeightResizeDir.UP}),n.make({widthDir:e.WidthResizeDir.NONE,heightDir:e.HeightResizeDir.UP}),n.make({widthDir:e.WidthResizeDir.RIGHT,heightDir:e.HeightResizeDir.UP}),n.make({widthDir:e.WidthResizeDir.LEFT,heightDir:e.HeightResizeDir.NONE}),n.make({widthDir:e.WidthResizeDir.RIGHT,heightDir:e.HeightResizeDir.NONE}),n.make({widthDir:e.WidthResizeDir.LEFT,heightDir:e.HeightResizeDir.DOWN}),n.make({widthDir:e.WidthResizeDir.NONE,heightDir:e.HeightResizeDir.DOWN}),n.make({widthDir:e.WidthResizeDir.RIGHT,heightDir:e.HeightResizeDir.DOWN})),this.dispatchEvent(new Event("rotate")),this.append($e.div({},void 0,"rotate-handle-line").make(),$e.p({},"refresh").classes("icon","rotate-handle").style({display:"none"}).on("mousedown",((e,t)=>t.toggleAttribute("selected",!0))).do((e=>window.addEventListener("mouseup",(()=>e.removeAttribute("selected"))))).do((t=>window.addEventListener("mousemove",(r=>{if(t.hasAttribute("selected")){const t=e.getMouseOffset(r,this.parentElement);this.transform.rotation=t.sub(this.transform.center).heading()+Math.PI/2,this.dispatchEvent(new Event("rotate")),this.refreshCSSVars()}})))).make())}refreshCSSVars(){this.style.setProperty("--transform-position-x",100*this.transform.center.x+"%"),this.style.setProperty("--transform-position-y",100*this.transform.center.y+"%"),this.style.setProperty("--transform-size-width",100*Math.abs(this.transform.dim.width)+"%"),this.style.setProperty("--transform-size-height",100*Math.abs(this.transform.dim.height)+"%"),this.style.setProperty("--transform-rotation",this.transform.rotation+"rad")}static getMouseOffset(e,t){const r=je.fromElement(t);return ke.fromPoint(e).sub(r.center).div(r.dim.getCorner())}},(()=>{const c="function"==typeof Symbol&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;t=[Ve("controls-visible")],r=[Ve("lock-aspect-ratio")],Be(null,null,t,{kind:"field",name:"isControlsVisible",static:!1,private:!1,access:{has:e=>"isControlsVisible"in e,get:e=>e.isControlsVisible,set:(e,t)=>{e.isControlsVisible=t}},metadata:c},n,i),Be(null,null,r,{kind:"field",name:"lockAspectRatio",static:!1,private:!1,access:{has:e=>"lockAspectRatio"in e,get:e=>e.lockAspectRatio,set:(e,t)=>{e.lockAspectRatio=t}},metadata:c},a,o),c&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:c})})(),e.CANVAS_BOUNDS=new je(new ke(0,0),new Ge(1,1)),e.MIN_WIDTH=.05,e.MIN_HEIGHT=.05,Fe.loadStylesheet("transformable"),e})();!function(e){let t,r;!function(e){e.NONE="none",e.LEFT="left",e.RIGHT="right"}(t=e.WidthResizeDir||(e.WidthResizeDir={})),function(e){e.NONE="none",e.UP="up",e.DOWN="down"}(r=e.HeightResizeDir||(e.HeightResizeDir={})),e.getHeading=function(e,s){const n=ke.ZERO.copy();return e===t.LEFT?n.x=-1:e===t.RIGHT&&(n.x=1),s===r.UP?n.y=-1:s===r.DOWN&&(n.y=1),n.heading()}}(Ye||(Ye={}));const Xe=Ye;var qe=function(e,t,r,s,n,i){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,c=s.kind,l="getter"===c?"get":"setter"===c?"set":"value",u=!t&&e?s.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,s.name):{}),h=!1,m=r.length-1;m>=0;m--){var p={};for(var f in s)p[f]="access"===f?{}:s[f];for(var f in s.access)p.access[f]=s.access[f];p.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(e||null))};var E=(0,r[m])("accessor"===c?{get:d.get,set:d.set}:d[l],p);if("accessor"===c){if(void 0===E)continue;if(null===E||"object"!=typeof E)throw new TypeError("Object expected");(o=a(E.get))&&(d.get=o),(o=a(E.set))&&(d.set=o),(o=a(E.init))&&n.unshift(o)}else(o=a(E))&&("field"===c?n.unshift(o):d[l]=o)}u&&Object.defineProperty(u,s.name,d),h=!0},Ze=function(e,t,r){for(var s=arguments.length>2,n=0;n<t.length;n++)r=s?t[n].call(e,r):t[n].call(e);return s?r:void 0};const Je=Ae.INSTANCE;var Qe;!function(e){e.CONTAIN="contain",e.COVER="cover",e.FILL="fill",e.SCALE_DOWN="scale-down"}(Qe||(Qe={}));let et=(()=>{var e;let t,r,s=Xe,n=[],i=[],a=[],o=[];return e=class extends s{initElement(){const t=this.appendChild(Je.img({},this.src??e.DEFAULT_SRC).make());this.onAttributeChanged("src",(()=>t.src=this.src??e.DEFAULT_SRC)),this.onAttributeChanged("fit",(()=>t.style.objectFit=this.fit)),super.initElement()}constructor(){super(...arguments),this.src=Ze(this,n,null),this.fit=(Ze(this,i),Ze(this,a,Qe.FILL)),Ze(this,o)}},(()=>{const c="function"==typeof Symbol&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;t=[Me("src",{fromString:e=>e},null)],r=[Ue("fit",Qe)],qe(null,null,t,{kind:"field",name:"src",static:!1,private:!1,access:{has:e=>"src"in e,get:e=>e.src,set:(e,t)=>{e.src=t}},metadata:c},n,i),qe(null,null,r,{kind:"field",name:"fit",static:!1,private:!1,access:{has:e=>"fit"in e,get:e=>e.fit,set:(e,t)=>{e.fit=t}},metadata:c},a,o),c&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:c})})(),e.DEFAULT_SRC="/images/placeholder.svg",e})();customElements.define("transformable-image",et);class tt{constructor(e,t,r,s=255){this.r=e,this.g=r,this.b=t,this.a=s}toString(){return"#"+(255==this.a?[this.r,this.g,this.b]:[this.r,this.g,this.b,this.a]).map((e=>e.toString(16).padStart(2,"0"))).join("").toUpperCase()}static fromString(e){if(!e.startsWith("#"))throw new SyntaxError("hex color string does not start with a '#'");if((e=e.substring(1)).length%2!=0||e.length<6||e.length>8)throw new SyntaxError("incorrect number of encoding characters: "+e.length);return new tt(Number.parseInt(e.substring(0,2),16),Number.parseInt(e.substring(2,4),16),Number.parseInt(e.substring(4,6),16),Number.parseInt(e.substring(6,8)||"FF",16))}}tt.TRANSPARENT=new tt(0,0,0,0),tt.BLACK=new tt(0,0,0),tt.WHITE=new tt(255,255,255),tt.RED=new tt(255,0,0),tt.GREEN=new tt(0,255,0),tt.BLUE=new tt(0,0,255);const rt=tt;var st=function(e,t,r,s,n,i){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,c=s.kind,l="getter"===c?"get":"setter"===c?"set":"value",u=!t&&e?s.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,s.name):{}),h=!1,m=r.length-1;m>=0;m--){var p={};for(var f in s)p[f]="access"===f?{}:s[f];for(var f in s.access)p.access[f]=s.access[f];p.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(e||null))};var E=(0,r[m])("accessor"===c?{get:d.get,set:d.set}:d[l],p);if("accessor"===c){if(void 0===E)continue;if(null===E||"object"!=typeof E)throw new TypeError("Object expected");(o=a(E.get))&&(d.get=o),(o=a(E.set))&&(d.set=o),(o=a(E.init))&&n.unshift(o)}else(o=a(E))&&("field"===c?n.unshift(o):d[l]=o)}u&&Object.defineProperty(u,s.name,d),h=!0},nt=function(e,t,r){for(var s=arguments.length>2,n=0;n<t.length;n++)r=s?t[n].call(e,r):t[n].call(e);return s?r:void 0};const it=Ae.INSTANCE;var at;!function(e){e.SQUARE="square",e.RECTANGLE="rectangle",e.ROUNDED_RECTANGLE="rounded-rectangle",e.CIRCLE="circle",e.ELLIPSE="ellipse",e.TRIANGLE="triangle",e.RIGHT_TRIANGLE="right-triangle"}(at||(at={}));let ot=(()=>{var e;let t,r,s=Xe,n=[],i=[],a=[],o=[];return e=class extends s{initElement(){this.hasAttribute("type")||(this.type=at.SQUARE),this.appendChild(it.div({},void 0,"shape").make()),this.onAttributeChanged("type",(()=>{const t=e.WIDTH_HEIGHT_RATIOS[this.type];if(void 0===t)this.lockAspectRatio=!1;else{const e=new Ge(this.transform.dim.width,this.transform.dim.width/t),r=new Ge(this.transform.dim.height*t,this.transform.dim.height);this.transform.dim=e.area<=r.area?e:r,this.lockAspectRatio=!0,this.refreshCSSVars()}}),!0),this.onAttributeChanged("color",(()=>this.refreshCSSVars())),super.initElement()}refreshCSSVars(){super.refreshCSSVars(),this.style.setProperty("--shape-fill-color",this.color.toString())}constructor(){super(...arguments),this.type=nt(this,n,at.RECTANGLE),this.color=(nt(this,i),nt(this,a,rt.TRANSPARENT)),nt(this,o)}},(()=>{const c="function"==typeof Symbol&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;t=[Ue("type",at)],r=[Me("color",rt)],st(null,null,t,{kind:"field",name:"type",static:!1,private:!1,access:{has:e=>"type"in e,get:e=>e.type,set:(e,t)=>{e.type=t}},metadata:c},n,i),st(null,null,r,{kind:"field",name:"color",static:!1,private:!1,access:{has:e=>"color"in e,get:e=>e.color,set:(e,t)=>{e.color=t}},metadata:c},a,o),c&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:c})})(),e})();!function(e){e.WIDTH_HEIGHT_RATIOS=Object.freeze({[at.SQUARE]:1,[at.RECTANGLE]:void 0,[at.ROUNDED_RECTANGLE]:void 0,[at.CIRCLE]:1,[at.ELLIPSE]:void 0,[at.TRIANGLE]:void 0,[at.RIGHT_TRIANGLE]:void 0})}(ot||(ot={})),customElements.define("transformable-shape",ot);class ct extends Error{constructor(e){e=e?.trim(),super(e?"missing element: "+e:"missing element")}}var lt=function(e,t,r,s,n,i){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,c=s.kind,l="getter"===c?"get":"setter"===c?"set":"value",u=!t&&e?s.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,s.name):{}),h=!1,m=r.length-1;m>=0;m--){var p={};for(var f in s)p[f]="access"===f?{}:s[f];for(var f in s.access)p.access[f]=s.access[f];p.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(e||null))};var E=(0,r[m])("accessor"===c?{get:d.get,set:d.set}:d[l],p);if("accessor"===c){if(void 0===E)continue;if(null===E||"object"!=typeof E)throw new TypeError("Object expected");(o=a(E.get))&&(d.get=o),(o=a(E.set))&&(d.set=o),(o=a(E.init))&&n.unshift(o)}else(o=a(E))&&("field"===c?n.unshift(o):d[l]=o)}u&&Object.defineProperty(u,s.name,d),h=!0},ut=function(e,t,r){for(var s=arguments.length>2,n=0;n<t.length;n++)r=s?t[n].call(e,r):t[n].call(e);return s?r:void 0};const dt=Ae.INSTANCE;var ht,mt,pt,ft;!function(e){e.BOLD="bold",e.ITALIC="italic",e.UNDERLINE="underline",e.STRIKETHROUGH="strikethrough"}(ht||(ht={})),function(e){e.SERIF="serif",e.SANS_SERIF="sans-serif",e.MONOSPACE="monospace",e.CURSIVE="cursive",e.FANTASY="fantasy"}(mt||(mt={})),function(e){e.LEFT="left",e.CENTER="center",e.RIGHT="right",e.JUSTIFY="justify"}(pt||(pt={})),function(e){e.NONE="none",e.LOWERCASE="lowercase",e.UPPERCASE="uppercase",e.CAPITALIZE="capitalize"}(ft||(ft={}));let Et=(()=>{var e;let t,r,s,n,i,a,o=Xe,c=[],l=[],u=[],d=[],h=[],m=[],p=[],f=[],E=[],g=[],S=[],y=[];return e=class extends o{get displayString(){if(!this.paragraphElement)throw new ct("missing <p> element");return this.paragraphElement.textContent??""}set displayString(e){if(!this.paragraphElement)throw new ct("missing <p> element");this.paragraphElement.textContent=e}initElement(){super.initElement(),this.toggleAttribute("transformable-string",!0),this.paragraphElement=this.appendChild(dt.p({},"").classes("text").make()),this.onAttributeChanged(["color","font-family","alignment","font-size","case"],(()=>this.refreshCSSVars()))}refreshCSSVars(){this.style.setProperty("--text-fill-color",this.color.toString()),this.style.setProperty("--text-font-family",this.fontFamily),this.style.setProperty("--text-font-size",this.fontSize+"em"),this.style.setProperty("--text-alignment",this.alignment),this.style.setProperty("--text-case",this.case),super.refreshCSSVars()}constructor(){super(...arguments),this.color=ut(this,c,rt.TRANSPARENT),this.styles=(ut(this,l),ut(this,u,new Set)),this.fontFamily=(ut(this,d),ut(this,h,mt.SANS_SERIF)),this.alignment=(ut(this,m),ut(this,p,pt.LEFT)),this.fontSize=(ut(this,f),ut(this,E,1)),this.case=(ut(this,g),ut(this,S,ft.NONE)),ut(this,y)}},(()=>{const w="function"==typeof Symbol&&Symbol.metadata?Object.create(o[Symbol.metadata]??null):void 0;t=[Me("color",rt)],r=[He(ht)],s=[Ue("font-family",mt)],n=[Ue("alignment",pt)],i=[Me("font-size",{fromString:Number.parseFloat})],a=[Ue("case",ft)],lt(null,null,t,{kind:"field",name:"color",static:!1,private:!1,access:{has:e=>"color"in e,get:e=>e.color,set:(e,t)=>{e.color=t}},metadata:w},c,l),lt(null,null,r,{kind:"field",name:"styles",static:!1,private:!1,access:{has:e=>"styles"in e,get:e=>e.styles,set:(e,t)=>{e.styles=t}},metadata:w},u,d),lt(null,null,s,{kind:"field",name:"fontFamily",static:!1,private:!1,access:{has:e=>"fontFamily"in e,get:e=>e.fontFamily,set:(e,t)=>{e.fontFamily=t}},metadata:w},h,m),lt(null,null,n,{kind:"field",name:"alignment",static:!1,private:!1,access:{has:e=>"alignment"in e,get:e=>e.alignment,set:(e,t)=>{e.alignment=t}},metadata:w},p,f),lt(null,null,i,{kind:"field",name:"fontSize",static:!1,private:!1,access:{has:e=>"fontSize"in e,get:e=>e.fontSize,set:(e,t)=>{e.fontSize=t}},metadata:w},E,g),lt(null,null,a,{kind:"field",name:"case",static:!1,private:!1,access:{has:e=>"case"in e,get:e=>e.case,set:(e,t)=>{e.case=t}},metadata:w},S,y),w&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:w})})(),Fe.loadStylesheet("transformable-string"),e})();const gt=Et;customElements.define("transformable-text",class extends gt{get displayString(){return super.displayString}set displayString(e){super.displayString=e}initElement(){return super.initElement(),new Promise((e=>requestAnimationFrame((()=>{let t="";for(const e of Array.from(this.childNodes))e instanceof Text&&(t+=e.textContent??"",e.remove());this.displayString=t,e()}))))}});var St,yt=function(e,t,r,s,n,i){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,c=s.kind,l="getter"===c?"get":"setter"===c?"set":"value",u=!t&&e?s.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,s.name):{}),h=!1,m=r.length-1;m>=0;m--){var p={};for(var f in s)p[f]="access"===f?{}:s[f];for(var f in s.access)p.access[f]=s.access[f];p.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(e||null))};var E=(0,r[m])("accessor"===c?{get:d.get,set:d.set}:d[l],p);if("accessor"===c){if(void 0===E)continue;if(null===E||"object"!=typeof E)throw new TypeError("Object expected");(o=a(E.get))&&(d.get=o),(o=a(E.set))&&(d.set=o),(o=a(E.init))&&n.unshift(o)}else(o=a(E))&&("field"===c?n.unshift(o):d[l]=o)}u&&Object.defineProperty(u,s.name,d),h=!0},wt=function(e,t,r){for(var s=arguments.length>2,n=0;n<t.length;n++)r=s?t[n].call(e,r):t[n].call(e);return s?r:void 0};!function(e){e.DEFAULT="default"}(St||(St={}));let vt=(()=>{var e;let t,r,s=gt,n=[],i=[],a=[],o=[];return e=class extends s{initElement(){super.initElement(),this.onAttributeChanged(["date","format"],(()=>{this.displayString=this.formatDate(this.date,this.format)}),!0)}formatDate(t,r){if(r===St.DEFAULT)return t.toLocaleDateString(e.LOCALE,{weekday:"long",month:"long",day:"numeric",hour12:!0,hour:"numeric"}).replaceAll(",","").toUpperCase()}constructor(){super(...arguments),this.date=wt(this,n,new Date),this.format=(wt(this,i),wt(this,a,St.DEFAULT)),wt(this,o)}},(()=>{const c="function"==typeof Symbol&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;t=[Me("date",{fromString:e=>new Date(e),toString:e=>e.toISOString()})],r=[Ue("format",St,St.DEFAULT)],yt(null,null,t,{kind:"field",name:"date",static:!1,private:!1,access:{has:e=>"date"in e,get:e=>e.date,set:(e,t)=>{e.date=t}},metadata:c},n,i),yt(null,null,r,{kind:"field",name:"format",static:!1,private:!1,access:{has:e=>"format"in e,get:e=>e.format,set:(e,t)=>{e.format=t}},metadata:c},a,o),c&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:c})})(),e.LOCALE=new Intl.Locale("en-us"),e})();customElements.define("transformable-datetime-text",vt);class Dt{static capitalize(e){const t=e.toString();return t.charAt(0).toUpperCase()+t.substring(1)}}class bt{constructor(e={}){this.businessName=e.businessName??"",this.buildingName=e.buildingName??"",this.roomName=e.roomName??"",this.streetName=e.streetName??"",this.houseNumber=e.houseNumber??"",this.postalCode=e.postalCode??"",this.townName=e.townName??""}formatField(e,t){switch(e){case"businessName":case"buildingName":case"streetName":case"townName":return Dt.capitalize(t);case"postalCode":return t.toString().toUpperCase();default:return t.toString()}}format(e){const t={...bt.DEFAULT_FORMAT,...e};let r="";switch(t.atSign){case"long":r+="At ";break;case"short":r+="@ "}for(const e of bt.SECTION_KEYS)e.some((e=>t[e]))&&(r+=e.filter((e=>t[e])).map((e=>this.formatField(e,this[e]))).join(" ").trim(),r+=", ");for(r=r.trim();r.endsWith(",");)r=r.slice(0,-1).trim();for(;r.includes("  ");)r=r.replaceAll("  "," ");return r}toJSON(){return{businessName:this.businessName,buildingName:this.buildingName,roomName:this.roomName,streetName:this.streetName,houseNumber:this.houseNumber,postalCode:this.postalCode,townName:this.townName}}toString(){return JSON.stringify(this.toJSON())}static fromString(e){return new bt(JSON.parse(e))}}bt.DEFAULT_FORMAT={businessName:!1,buildingName:!1,roomName:!1,streetName:!1,houseNumber:!1,postalCode:!1,townName:!1,atSign:"none"},bt.SECTION_KEYS=[["businessName","buildingName","roomName"],["streetName","houseNumber"],["postalCode","townName"]];const Rt=bt;var Nt,Tt=function(e,t,r,s,n,i){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,c=s.kind,l="getter"===c?"get":"setter"===c?"set":"value",u=!t&&e?s.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,s.name):{}),h=!1,m=r.length-1;m>=0;m--){var p={};for(var f in s)p[f]="access"===f?{}:s[f];for(var f in s.access)p.access[f]=s.access[f];p.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(e||null))};var E=(0,r[m])("accessor"===c?{get:d.get,set:d.set}:d[l],p);if("accessor"===c){if(void 0===E)continue;if(null===E||"object"!=typeof E)throw new TypeError("Object expected");(o=a(E.get))&&(d.get=o),(o=a(E.set))&&(d.set=o),(o=a(E.init))&&n.unshift(o)}else(o=a(E))&&("field"===c?n.unshift(o):d[l]=o)}u&&Object.defineProperty(u,s.name,d),h=!0},At=function(e,t,r){for(var s=arguments.length>2,n=0;n<t.length;n++)r=s?t[n].call(e,r):t[n].call(e);return s?r:void 0};!function(e){e.BUSINESS_LOCAL="business-local",e.BUILDING_LOCAL="building-local",e.BUSINESS="business",e.BUILDING="building",e.ROOM="room",e.VENUE="venue",e.VENUE_ADDRESS="venue-address",e.FULL="full"}(Nt||(Nt={}));let Ot=(()=>{var e;let t,r,s=gt,n=[],i=[],a=[],o=[];return e=class extends s{initElement(){super.initElement(),this.onAttributeChanged(["address","format"],(()=>{this.displayString=this.formatDate(this.address,this.format)}),!0)}formatDate(e,t){switch(t){case Nt.BUSINESS_LOCAL:return e.format({businessName:!0,buildingName:!0,roomName:!0,atSign:"long"});case Nt.BUILDING_LOCAL:return e.format({buildingName:!0,roomName:!0,atSign:"short"});case Nt.BUSINESS:return e.format({businessName:!0,atSign:"long"});case Nt.BUILDING:return e.format({buildingName:!0,atSign:"short"});case Nt.ROOM:return e.format({roomName:!0,atSign:"short"});case Nt.VENUE:return e.format({businessName:!0,buildingName:!0,atSign:"long"});case Nt.VENUE_ADDRESS:return e.format({businessName:!0,buildingName:!0,streetName:!0,houseNumber:!0,atSign:"short"});case Nt.FULL:return e.format({businessName:!0,buildingName:!0,roomName:!0,streetName:!0,houseNumber:!0,postalCode:!0,townName:!0,atSign:"long"})}}constructor(){super(...arguments),this.address=At(this,n,new Rt),this.format=(At(this,i),At(this,a,Nt.FULL)),At(this,o)}},(()=>{const c="function"==typeof Symbol&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;t=[Me("address",Rt)],r=[Ue("format",Nt)],Tt(null,null,t,{kind:"field",name:"address",static:!1,private:!1,access:{has:e=>"address"in e,get:e=>e.address,set:(e,t)=>{e.address=t}},metadata:c},n,i),Tt(null,null,r,{kind:"field",name:"format",static:!1,private:!1,access:{has:e=>"format"in e,get:e=>e.format,set:(e,t)=>{e.format=t}},metadata:c},a,o),c&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:c})})(),e})();customElements.define("transformable-address-text",Ot)})();