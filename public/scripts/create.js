(()=>{"use strict";class t{addStep(t){return this.steps.push(t),this}constructor(e,r,s=[]){this.mold=e instanceof t?()=>e.make():e,this.defaultParameters=r,this.steps=s}make(t={}){const e={...this.defaultParameters,...t},r=this.mold(e);for(const t of this.steps)t(r,e);return r}}!function(t){let e;!function(t){t.resolve=function(t,e,r){return"function"==typeof t?t(e,r):t}}(e=t.DynamicValue||(t.DynamicValue={}))}(t||(t={}));const e=t;var r;!function(t){t.apply=function(t,e){for(const r in e){const s=r;t.style[s]=e[s]}return t}}(r||(r={}));const s=r;class n extends e{copy(){return new n(this.mold,this.defaultParameters,[...this.steps])}id(t){return this.addStep(((r,s)=>r.id=String(e.DynamicValue.resolve(t,r,s))))}classes(...t){return this.addStep(((r,s)=>r.classList.add(...t.map((t=>e.DynamicValue.resolve(t,r,s))).flat(1).flatMap((t=>String(t).split(" "))))))}attribute(t,r){return this.addStep(((s,n)=>{const i=String(e.DynamicValue.resolve(t,s,n));void 0===r?s.toggleAttribute(i,!0):s.setAttribute(i,String(e.DynamicValue.resolve(r,s,n)))}))}attributes(t){return this.addStep(((r,s)=>{for(const n in t)r.setAttribute(n,String(e.DynamicValue.resolve(t[n],r,s)))}))}text(t){return this.addStep(((r,s)=>r.textContent=String(e.DynamicValue.resolve(t,r,s))))}style(t){return this.addStep(((r,n)=>{const i={};for(const s in t){const a=s;i[a]=String(e.DynamicValue.resolve(t[a],r,n))}s.apply(r,i)}))}tooltip(t){return this.addStep(((r,s)=>r.title=String(e.DynamicValue.resolve(t,r,s))))}children(...t){return this.addStep(((e,r)=>{for(const s of t){const t="function"==typeof s?s(e,r):s;t&&("string"==typeof t?e.appendChild(document.createTextNode(t)):t instanceof HTMLElement?e.appendChild(t):e.appendChild(t.make(r)))}}))}on(t,e){return this.addStep((r=>r.addEventListener(t,(t=>e(t,r)))))}once(t,e){return this.addStep((r=>r.addEventListener(t,(t=>e(t,r)),{once:!0})))}onAttributeChanged(t,e){return this.addStep((r=>new MutationObserver((s=>{for(const n of s)if("attributes"===n.type){const s=r.getAttribute(t);s!==n.oldValue&&e(s,n.oldValue,r)}})).observe(r,{attributes:!0,attributeOldValue:!0,attributeFilter:[t]})))}do(t){return this.addStep(t)}static fromTagName(t,e){return new n((()=>document.createElement(t)),void 0===e?{}:e)}}const i=n;class a extends i{copy(){return new a(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("a")),t,e)}doDownload(t){return this.addStep(((r,s)=>r.download=e.DynamicValue.resolve(t,r,s)?"true":""))}href(t){return this.addStep(((e,r)=>{const s="function"==typeof t?t(e,r):t;e.href=s instanceof URL?s.href:s}))}referrerPolicy(t){return this.addStep(((r,s)=>r.referrerPolicy=e.DynamicValue.resolve(t,r,s)))}openInNewTab(t){return this.addStep(((r,s)=>r.target=e.DynamicValue.resolve(t,r,s)?"_blank":""))}}class o extends i{copy(){return new o(this.mold,this.defaultParameters,[...this.steps])}showControls(t){return this.addStep(((r,s)=>r.controls=e.DynamicValue.resolve(t,r,s)))}doLoop(t){return this.addStep(((r,s)=>r.loop=e.DynamicValue.resolve(t,r,s)))}doMute(t){return this.addStep(((r,s)=>r.muted=e.DynamicValue.resolve(t,r,s)))}rate(t,r=!1){return this.addStep(((s,n)=>{s.playbackRate=e.DynamicValue.resolve(t,s,n),s.preservesPitch=e.DynamicValue.resolve(r,s,n)}))}src(t){return this.addStep(((e,r)=>{const s="function"==typeof t?t(e,r):t;e.src=s instanceof URL?s.href:s}))}}class u extends o{copy(){return new u(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("audio")),t,e)}}class c extends i{copy(){return new c(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("base")),t,e)}href(t){return this.addStep(((e,r)=>{const s="function"==typeof t?t(e,r):t;e.href=s instanceof URL?s.href:s}))}openInNewTab(t){return this.addStep(((r,s)=>r.target=e.DynamicValue.resolve(t,r,s)?"_blank":""))}}class l extends i{copy(){return new l(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("body")),t,e)}}class h extends i{copy(){return new h(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("br")),t,e)}}class d extends i{copy(){return new d(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("button")),t,e)}doDisable(t){return this.addStep(((r,s)=>r.disabled=e.DynamicValue.resolve(t,r,s)))}name(t){return this.addStep(((r,s)=>r.name=String(e.DynamicValue.resolve(t,r,s))))}}class m extends i{copy(){return new m(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("canvas")),t,e)}width(t){return this.addStep(((r,s)=>r.width=Math.floor(e.DynamicValue.resolve(t,r,s))))}height(t){return this.addStep(((r,s)=>r.height=Math.floor(e.DynamicValue.resolve(t,r,s))))}}class p extends i{copy(){return new p(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("data")),t,e)}value(t){return this.addStep(((r,s)=>r.value=String(e.DynamicValue.resolve(t,r,s))))}}class f extends i{copy(){return new f(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("datalist")),t,e)}options(...t){return this.children(...t)}}class E extends i{copy(){return new E(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("dialog")),t,e)}isOpen(t){return this.addStep(((r,s)=>r.open=e.DynamicValue.resolve(t,r,s)))}returnValue(t){return this.addStep(((r,s)=>r.returnValue=String(e.DynamicValue.resolve(t,r,s))))}}class S extends i{copy(){return new S(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("div")),t,e)}flex(){return this.classes("flex"),new y(this.defaultParameters,this.steps)}flexRows(){return this.classes("rows"),new g(this.defaultParameters,this.steps)}flexColumns(){return this.classes("columns"),new w(this.defaultParameters,this.steps)}}class y extends S{copy(){return new y(this.defaultParameters,[...this.steps])}spacing(t){return this.classes(((r,s)=>e.DynamicValue.resolve(t,r,s)))}wrapItems(t){return this.classes(((r,s)=>e.DynamicValue.resolve(t,r,s)?"wrap":"no-wrap"))}}class g extends y{alignItems(t){return this.classes(((r,s)=>e.DynamicValue.resolve(t,r,s)))}alignContent(t){return this.classes(((r,s)=>e.DynamicValue.resolve(t,r,s)))}}class w extends y{alignItems(t){return this.classes(((r,s)=>e.DynamicValue.resolve(t,r,s)))}alignContent(t){return this.classes(((r,s)=>e.DynamicValue.resolve(t,r,s)))}}class D extends i{copy(){return new D(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("dl")),t,e)}}class R extends i{copy(){return new R(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("embed")),t,e)}width(t){return this.addStep(((r,s)=>r.width=Math.floor(e.DynamicValue.resolve(t,r,s)).toString()))}height(t){return this.addStep(((r,s)=>r.height=Math.floor(e.DynamicValue.resolve(t,r,s)).toString()))}src(t){return this.addStep(((e,r)=>{const s="function"==typeof t?t(e,r):t;e.src=s instanceof URL?s.href:s}))}}class v extends i{copy(){return new v(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("fieldset")),t,e)}name(t){return this.addStep(((r,s)=>r.name=String(e.DynamicValue.resolve(t,r,s))))}}class T extends i{copy(){return new T(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("form")),t,e)}name(t){return this.addStep(((r,s)=>r.name=String(e.DynamicValue.resolve(t,r,s))))}method(t){return this.addStep(((r,s)=>r.method=String(e.DynamicValue.resolve(t,r,s))))}}!function(t){let e;!function(t){t.POST="post",t.GET="get",t.DIALOG="dialog"}(e=t.Method||(t.Method={}))}(T||(T={}));const A=T;class b extends i{copy(){return new b(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("head")),t,e)}}class I extends i{copy(){return new I(this.size,this.defaultParameters,[...this.steps])}constructor(t,e,r=[]){super((t=>document.createElement("h"+this.size)),e,r),this.size=t}}const x=I;class N extends i{copy(){return new N(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("hr")),t,e)}}class L extends i{copy(){return new L(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("html")),t,e)}}class C extends i{copy(){return new C(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("iframe")),t,e)}allow(t){return this.addStep(((r,s)=>r.allow=e.DynamicValue.resolve(t,r,s)))}allowFullscreen(t){return this.addStep(((r,s)=>r.allowFullscreen=e.DynamicValue.resolve(t,r,s)))}src(t){return this.addStep(((e,r)=>{const s="function"==typeof t?t(e,r):t;e.src=s instanceof URL?s.href:s}))}}class O extends i{fetchPriority(t){return this.addStep(((r,s)=>r.fetchPriority=e.DynamicValue.resolve(t,r,s)))}}!function(t){let e;!function(t){t.LOW="low",t.HIGH="high",t.AUTO="auto"}(e=t.FetchPriority||(t.FetchPriority={}))}(O||(O={}));const P=O;class V extends P{copy(){return new V(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("img")),t,e)}alt(t){return this.addStep(((r,s)=>r.alt=String(e.DynamicValue.resolve(t,r,s))))}loadingMode(t){return this.addStep(((r,s)=>r.loading=e.DynamicValue.resolve(t,r,s)))}width(t){return this.addStep(((r,s)=>r.width=Math.floor(e.DynamicValue.resolve(t,r,s))))}height(t){return this.addStep(((r,s)=>r.height=Math.floor(e.DynamicValue.resolve(t,r,s))))}src(t){return this.addStep(((e,r)=>{const s="function"==typeof t?t(e,r):t;e.src=s instanceof URL?s.href:s}))}srcset(...t){return this.addStep(((e,r)=>e.srcset=t.map((t=>"function"==typeof t?t(e,r):t)).map(String).join(",")))}sizes(...t){return this.addStep(((r,s)=>r.sizes=t.map((t=>e.DynamicValue.resolve(t,r,s))).join(",")))}}!function(t){let e;!function(t){t.EAGER="eager",t.LAZY="lazy"}(e=t.LoadingMode||(t.LoadingMode={}))}(V||(V={}));const M=V;class H extends i{copy(){return new H(this.type,this.defaultParameters,[...this.steps])}constructor(t,e,r=[]){super((()=>{const e=document.createElement("input");return e.type=t,e}),e),this.type=t}value(t){return this.addStep(((e,r)=>e.value=H.valueToString(this.type,"function"==typeof t?t(e,r):t)))}name(t){return this.addStep(((r,s)=>r.name=String(e.DynamicValue.resolve(t,r,s))))}isDisabled(t){return this.addStep(((r,s)=>r.disabled=e.DynamicValue.resolve(t,r,s)))}isRequired(t){return this.addStep(((r,s)=>r.required=e.DynamicValue.resolve(t,r,s)))}}!function(t){let e;!function(t){t.BUTTON="button",t.CHECKBOX="checkbox",t.COLOR="color",t.DATE="date",t.DATETIME_LOCAL="datetime-local",t.EMAIL="email",t.FILE="file",t.HIDDEN="hidden",t.IMAGE="image",t.MONTH="month",t.NUMBER="number",t.PASSWORD="password",t.RADIO="radio",t.RANGE="range",t.RESET="reset",t.SEARCH="search",t.SUBMIT="submit",t.TEL="tel",t.TEXT="text",t.TIME="time",t.URL="url",t.WEEK="week"}(e=t.Type||(t.Type={}));const r=Object.freeze({[e.BUTTON]:{fromString:()=>{},toString:()=>""},[e.CHECKBOX]:{fromString:t=>t,toString:t=>t},[e.COLOR]:{fromString:t=>t,toString:t=>t},[e.DATE]:{fromString:t=>{const[e,r,s]=t.split("-").map((t=>Number.parseInt(t)));return{day:s,month:r,year:e}},toString:t=>`${t.year.toString().padStart(4,"0")}-${(t.month+1).toString().padStart(2,"0")}-${t.day.toString().padStart(2,"0")}`},[e.DATETIME_LOCAL]:{fromString:t=>{const[e,r]=t.split("T"),[s,n,i]=e.split("-").map((t=>Number.parseInt(t))),[a,o]=r.split("-").map((t=>Number.parseInt(t)));return new Date(s,n-1,i,a,o)},toString:t=>{let e=t.toISOString();return e.includes(".")&&(e=e.substring(0,e.lastIndexOf("."))),e}},[e.EMAIL]:{fromString:t=>t,toString:t=>t},[e.FILE]:{fromString:t=>t,toString:t=>t},[e.HIDDEN]:{fromString:t=>t,toString:t=>t},[e.IMAGE]:{fromString:()=>{},toString:()=>""},[e.MONTH]:{fromString:t=>{const[e,r]=t.split("-").map((t=>Number.parseInt(t)));return{monthIndex:r-1,year:e}},toString:t=>`${t.year.toString().padStart(4,"0")}-${(t.monthIndex+1).toString().padStart(2,"0")}`},[e.NUMBER]:{fromString:t=>Number.parseFloat(t),toString:t=>t.toString()},[e.PASSWORD]:{fromString:t=>t,toString:t=>t},[e.RADIO]:{fromString:t=>t,toString:t=>t},[e.RANGE]:{fromString:t=>Number.parseFloat(t),toString:t=>t.toString()},[e.RESET]:{fromString:()=>{},toString:()=>""},[e.SEARCH]:{fromString:t=>t,toString:t=>t},[e.SUBMIT]:{fromString:()=>{},toString:()=>""},[e.TEL]:{fromString:t=>t,toString:t=>t},[e.TEXT]:{fromString:t=>t,toString:t=>t},[e.TIME]:{fromString:t=>{const[e,r]=t.split(":").map((t=>Number.parseInt(t)));return{hours:e,minutes:r}},toString:t=>`${t.hours.toString().padStart(2,"0")}:${t.minutes.toString().padStart(2,"0")}`},[e.URL]:{fromString:t=>new URL(t),toString:t=>t.href},[e.WEEK]:{fromString:t=>{const[e,r]=t.split("-W").map((t=>Number.parseInt(t)));return{year:e,week:r}},toString:t=>`${t.year.toString().padStart(4,"0")}-W${t.week.toString().padStart(2,"0")}`}});t.valueToString=function(t,e){return r[t].toString(e)},t.valueFromString=function(t,e){return r[t].fromString(e)},t.DEFAULT_CREATORS=Object.freeze({[e.BUTTON]:t=>new U(e.BUTTON,t),[e.CHECKBOX]:t=>new z(e.CHECKBOX,t),[e.COLOR]:r=>new t(e.COLOR,r),[e.DATE]:t=>new k(e.DATE,t),[e.DATETIME_LOCAL]:t=>new k(e.DATETIME_LOCAL,t),[e.EMAIL]:t=>new G(e.EMAIL,t),[e.FILE]:t=>new G(e.FILE,t),[e.HIDDEN]:t=>new G(e.HIDDEN,t),[e.IMAGE]:t=>new _(t),[e.MONTH]:t=>new k(e.MONTH,t),[e.NUMBER]:t=>new k(e.NUMBER,t),[e.PASSWORD]:t=>new G(e.PASSWORD,t),[e.RADIO]:t=>new z(e.RADIO,t),[e.RANGE]:t=>new k(e.RANGE,t),[e.RESET]:t=>new U(e.RESET,t),[e.SEARCH]:t=>new G(e.SEARCH,t),[e.SUBMIT]:t=>new U(e.SUBMIT,t),[e.TEL]:t=>new G(e.TEL,t),[e.TEXT]:t=>new G(e.TEXT,t),[e.TIME]:t=>new k(e.TIME,t),[e.URL]:t=>new G(e.URL,t),[e.WEEK]:t=>new k(e.WEEK,t)}),t.fromType=function(e,r){return t.DEFAULT_CREATORS[e](r)}}(H||(H={}));const F=H;class U extends H{copy(){return new U(this.type,this.defaultParameters,[...this.steps])}constructor(t,e,r=[]){super(t,e,r)}text(t){return this.addStep(((r,s)=>r.value=String(e.DynamicValue.resolve(t,r,s))))}}class _ extends H{copy(){return new _(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super(H.Type.IMAGE,t,e)}src(t){return this.addStep(((e,r)=>e.src=String("function"==typeof t?t(e,r):t)))}}class G extends H{copy(){return new G(this.type,this.defaultParameters,[...this.steps])}text(t){return this.addStep(((e,r)=>e.value=String("function"==typeof t?t(e,r):t)))}placeholder(t){return this.addStep(((r,s)=>r.placeholder=String(e.DynamicValue.resolve(t,r,s))))}pattern(t){return this.addStep(((e,r)=>e.pattern=("function"==typeof t?t(e,r):t).source))}minLength(t){return this.addStep(((r,s)=>r.minLength=Math.floor(e.DynamicValue.resolve(t,r,s))))}maxLength(t){return this.addStep(((r,s)=>r.maxLength=Math.floor(e.DynamicValue.resolve(t,r,s))))}}class z extends H{copy(){return new z(this.type,this.defaultParameters,[...this.steps])}isChecked(t){return this.addStep(((r,s)=>r.checked=e.DynamicValue.resolve(t,r,s)))}}class k extends H{copy(){return new k(this.type,this.defaultParameters,[...this.steps])}min(t){return this.addStep(((e,r)=>e.min=H.valueToString(this.type,"function"==typeof t?t(e,r):t)))}max(t){return this.addStep(((e,r)=>e.max=H.valueToString(this.type,"function"==typeof t?t(e,r):t)))}step(t){return this.addStep(((r,s)=>r.step=e.DynamicValue.resolve(t,r,s).toString()))}placeholder(t){return this.addStep(((r,s)=>r.placeholder=String(e.DynamicValue.resolve(t,r,s))))}}class W extends i{copy(){return new W(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("label")),t,e)}for(t){return this.addStep(((e,r)=>{const s="function"==typeof t?t(e,r):t;e.id=s instanceof Element?s.id:String(s)}))}}class B extends i{copy(){return new B(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("legend")),t,e)}}class j extends i{copy(){return new j(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("li")),t,e)}}class K extends P{copy(){return new K(this.relationship,this.defaultParameters,[...this.steps])}constructor(t,e,r=[]){super((()=>{const e=document.createElement("link");return e.rel=t,e}),e,r),this.relationship=t}href(t){return this.addStep(((e,r)=>{const s="function"==typeof t?t(e,r):t;e.href=s instanceof URL?s.href:s}))}type(t){return this.addStep(((r,s)=>r.type=e.DynamicValue.resolve(t,r,s)))}media(t){return this.addStep(((e,r)=>{const s="function"==typeof t?t(e,r):t;e.media=s.toString()}))}}!function(t){let e;!function(t){t.ALTERNATE="alternate",t.AUTHOR="author",t.CANONICAL="canonical",t.DNS_PREFETCH="dns-prefetch",t.EXPECT="expect",t.HELP="help",t.ICON="icon",t.LICENSE="license",t.MANIFEST="manifest",t.ME="me",t.MODULE_PRELOAD="modulepreload",t.NEXT="next",t.PING_BACK="pingback",t.PRECONNECT="preconnect",t.PREFETCH="prefetch",t.PRELOAD="preload",t.PRERENDER="prerender",t.PREV="prev",t.PRIVACY_POLICY="privacy-policy",t.SEARCH="search",t.STYLESHEET="stylesheet",t.TERMS_OF_SERVICE="terms-of-service"}(e=t.Relationship||(t.Relationship={})),t.DEFAULT_CREATORS=Object.freeze({[e.ALTERNATE]:r=>new t(e.ALTERNATE,r),[e.AUTHOR]:r=>new t(e.AUTHOR,r),[e.CANONICAL]:r=>new t(e.CANONICAL,r),[e.DNS_PREFETCH]:r=>new t(e.DNS_PREFETCH,r),[e.EXPECT]:r=>new t(e.EXPECT,r),[e.HELP]:r=>new t(e.HELP,r),[e.ICON]:r=>new t(e.ICON,r),[e.LICENSE]:r=>new t(e.LICENSE,r),[e.MANIFEST]:r=>new t(e.MANIFEST,r),[e.ME]:r=>new t(e.ME,r),[e.MODULE_PRELOAD]:t=>new Y(e.MODULE_PRELOAD,t),[e.NEXT]:r=>new t(e.NEXT,r),[e.PING_BACK]:r=>new t(e.PING_BACK,r),[e.PRECONNECT]:r=>new t(e.PRECONNECT,r),[e.PREFETCH]:r=>new t(e.PREFETCH,r),[e.PRELOAD]:t=>new Y(e.PRELOAD,t),[e.PRERENDER]:r=>new t(e.PRERENDER,r),[e.PREV]:r=>new t(e.PREV,r),[e.PRIVACY_POLICY]:r=>new t(e.PRIVACY_POLICY,r),[e.SEARCH]:r=>new t(e.SEARCH,r),[e.STYLESHEET]:r=>new t(e.STYLESHEET,r),[e.TERMS_OF_SERVICE]:r=>new t(e.TERMS_OF_SERVICE,r)})}(K||(K={}));const $=K;class Y extends K{copy(){return new Y(this.relationship,this.defaultParameters,[...this.steps])}as(t){return this.addStep(((r,s)=>r.as=e.DynamicValue.resolve(t,r,s)))}}!function(t){let e;!function(t){t.AUDIO="audio",t.DOCUMENT="document",t.EMBED="embed",t.FETCH="fetch",t.FONT="font",t.IMAGE="image",t.OBJECT="object",t.SCRIPT="script",t.STYLE="style",t.TRACK="track",t.VIDEO="video",t.WORKER="worker"}(e=t.ContentType||(t.ContentType={}))}(Y||(Y={}));class X extends i{copy(){return new X(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("menu")),t,e)}}class q extends i{copy(){return new q(this.name,this.defaultParameters,[...this.steps])}constructor(t,e,r=[]){super((()=>{const e=document.createElement("meta");return e.name=t,e}),e,r),this.name=t}content(t){return this.addStep(((r,s)=>r.content=[e.DynamicValue.resolve(t,r,s)].flat().join(",")))}}!function(t){let e,r;!function(t){t.AUTHOR="author",t.DESCRIPTION="description",t.GENERATOR="generator",t.KEYWORDS="keywords",t.REFERRER="referrer",t.THEME_COLOR="theme-color"}(e=t.Name||(t.Name={})),function(t){t.ORIGIN="origin",t.NO_REFERRER_WHEN_DOWNGRADE="no-referrer-when-downgrade",t.ORIGIN_WHEN_CROSS_ORIGIN="origin-when-cross-origin",t.SAME_ORIGIN="same-origin",t.STRICT_ORIGIN="strict-origin",t.STRICT_ORIGIN_WHEN_CROSS_ORIGIN="strict-origin-when-cross-origin",t.UNSAFE_URL="unsafe-URL"}(r||(r={})),t.DEFAULT_CREATORS=Object.freeze({[e.AUTHOR]:r=>new t(e.AUTHOR,r),[e.DESCRIPTION]:r=>new t(e.DESCRIPTION,r),[e.GENERATOR]:r=>new t(e.GENERATOR,r),[e.KEYWORDS]:r=>new t(e.KEYWORDS,r),[e.REFERRER]:r=>new t(e.REFERRER,r),[e.THEME_COLOR]:r=>new t(e.THEME_COLOR,r)})}(q||(q={}));const Z=q;class Q extends i{copy(){return new Q(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("meter")),t,e)}high(t){return this.addStep(((r,s)=>r.high=e.DynamicValue.resolve(t,r,s)))}low(t){return this.addStep(((r,s)=>r.low=e.DynamicValue.resolve(t,r,s)))}min(t){return this.addStep(((r,s)=>r.min=e.DynamicValue.resolve(t,r,s)))}max(t){return this.addStep(((r,s)=>r.max=e.DynamicValue.resolve(t,r,s)))}optimum(t){return this.addStep(((r,s)=>r.optimum=e.DynamicValue.resolve(t,r,s)))}value(t){return this.addStep(((r,s)=>r.value=e.DynamicValue.resolve(t,r,s)))}}class J extends i{copy(){return new J(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("object")),t,e)}name(t){return this.addStep(((r,s)=>r.name=e.DynamicValue.resolve(t,r,s)))}data(t){return this.addStep(((e,r)=>{const s="function"==typeof t?t(e,r):t;e.data=s instanceof URL?s.href:s}))}type(t){return this.addStep(((r,s)=>r.type=e.DynamicValue.resolve(t,r,s)))}width(t){return this.addStep(((r,s)=>r.width=Math.floor(e.DynamicValue.resolve(t,r,s)).toString()))}height(t){return this.addStep(((r,s)=>r.height=Math.floor(e.DynamicValue.resolve(t,r,s)).toString()))}}class tt extends i{copy(){return new tt(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("optgroup")),t,e)}isDisabled(t){return this.addStep(((r,s)=>r.disabled=e.DynamicValue.resolve(t,r,s)))}label(t){return this.addStep(((r,s)=>r.label=e.DynamicValue.resolve(t,r,s)))}options(...t){return this.children(...t)}}class et extends i{copy(){return new et(this.value,this.defaultParameters,[...this.steps])}constructor(t,e,r=[]){super((()=>{const e=document.createElement("option");return e.value=e.text=t,e}),e,r),this.value=t}text(t){return this.addStep(((r,s)=>r.text=String(e.DynamicValue.resolve(t,r,s))))}}class rt extends i{copy(){return new rt(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("ol")),t,e)}isReversed(t){return this.addStep(((r,s)=>r.reversed=e.DynamicValue.resolve(t,r,s)))}start(t){return this.addStep(((r,s)=>r.start=e.DynamicValue.resolve(t,r,s)))}type(t){return this.addStep(((r,s)=>r.type=e.DynamicValue.resolve(t,r,s)))}}!function(t){let e;!function(t){t.DECIMAL_NUMBERS="1",t.LOWERCASE_LETTERS="a",t.UPPERCASE_LETTERS="A",t.LOWERCASE_ROMAN_NUMERALS="i",t.UPPERCASE_ROMAN_NUMERALS="I"}(e=t.Type||(t.Type={}))}(rt||(rt={}));const st=rt;class nt extends i{copy(){return new nt(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("output")),t,e)}name(t){return this.addStep(((r,s)=>r.name=e.DynamicValue.resolve(t,r,s)))}value(t){return this.addStep(((r,s)=>r.value=e.DynamicValue.resolve(t,r,s)))}for(...t){return this.addStep(((e,r)=>e.setAttribute("for",t.map((t=>"function"==typeof t?t(e,r):t)).map((t=>t instanceof Element?t.id:t)).join(" "))))}}class it extends i{copy(){return new it(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("p")),t,e)}}class at extends i{copy(){return new at(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("picture")),t,e)}}class ot extends i{copy(){return new ot(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("pre")),t,e)}}class ut{static clamp(t,e=-1/0,r=1/0){return t<e?e:t>r?r:t}static absDiff(t,e){return Math.abs(t-e)}static degToRad(t){return t/360*Math.PI*2}static radToDeg(t){return t/Math.PI/2*360}}class ct extends i{copy(){return new ct(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("progress")),t,e)}max(t){return this.addStep(((r,s)=>r.max=Math.max(0,e.DynamicValue.resolve(t,r,s))))}value(t){return this.addStep(((r,s)=>r.value=ut.clamp(e.DynamicValue.resolve(t,r,s),0,r.max)))}}class lt extends P{copy(){return new lt(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("script")),t,e)}isAsync(t){return this.addStep(((r,s)=>r.async=e.DynamicValue.resolve(t,r,s)))}src(t){return this.addStep(((e,r)=>{const s="function"==typeof t?t(e,r):t;e.src=s instanceof URL?s.href:s}))}type(t){return this.addStep(((r,s)=>r.type=e.DynamicValue.resolve(t,r,s)))}}!function(t){let e;!function(t){t.DEFAULT="",t.IMPORT_MAP="importmap",t.MODULE="module",t.DATA="data"}(e=t.Type||(t.Type={}))}(lt||(lt={}));const ht=lt;class dt extends i{copy(){return new dt(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("select")),t,e)}isDisabled(t){return this.addStep(((r,s)=>r.disabled=e.DynamicValue.resolve(t,r,s)))}isRequired(t){return this.addStep(((r,s)=>r.required=e.DynamicValue.resolve(t,r,s)))}name(t){return this.addStep(((r,s)=>r.name=e.DynamicValue.resolve(t,r,s)))}options(...t){return this.addStep(((e,r)=>t.forEach((t=>e.add(t.make(r))))))}value(t){return this.addStep(((r,s)=>r.value=e.DynamicValue.resolve(t,r,s)))}onValueChanged(t){return this.on("change",((e,r)=>t(r.value,e,r)))}onceValueChanged(t){return this.once("change",((e,r)=>t(r.value,e,r)))}}class mt extends i{copy(){return new mt(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("source")),t,e)}type(t){return this.addStep(((r,s)=>r.type=e.DynamicValue.resolve(t,r,s)))}width(t){return this.addStep(((r,s)=>r.width=Math.floor(e.DynamicValue.resolve(t,r,s))))}height(t){return this.addStep(((r,s)=>r.height=Math.floor(e.DynamicValue.resolve(t,r,s))))}src(t){return this.addStep(((e,r)=>{const s="function"==typeof t?t(e,r):t;e.src=s instanceof URL?s.href:s}))}srcset(...t){return this.addStep(((e,r)=>e.srcset=t.map((t=>"function"==typeof t?t(e,r):t)).map(String).join(",")))}sizes(...t){return this.addStep(((r,s)=>r.sizes=t.map((t=>e.DynamicValue.resolve(t,r,s))).join(",")))}}const pt=mt;class ft extends i{copy(){return new ft(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("span")),t,e)}}class Et extends i{copy(){return new Et(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("style")),t,e)}idDisabled(t){return this.addStep(((r,s)=>r.disabled=e.DynamicValue.resolve(t,r,s)))}media(t){return this.addStep(((e,r)=>{const s="function"==typeof t?t(e,r):t;e.media=s.toString()}))}}class St extends i{copy(){return new St(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("table")),t,e)}caption(t){return this.addStep(((r,s)=>{const n=document.createElement("caption");n.textContent=e.DynamicValue.resolve(t,r,s),r.caption=n}))}}class yt extends i{copy(){return new yt(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("caption")),t,e)}}class gt extends i{copy(){return new gt(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("textarea")),t,e)}isDisabled(t){return this.addStep(((r,s)=>r.disabled=e.DynamicValue.resolve(t,r,s)))}isRequired(t){return this.addStep(((r,s)=>r.required=e.DynamicValue.resolve(t,r,s)))}name(t){return this.addStep(((r,s)=>r.name=String(e.DynamicValue.resolve(t,r,s))))}text(t){return this.addStep(((r,s)=>r.value=String(e.DynamicValue.resolve(t,r,s))))}numRows(t){return this.addStep(((r,s)=>r.rows=Math.floor(e.DynamicValue.resolve(t,r,s))))}numColumns(t){return this.addStep(((r,s)=>r.rows=Math.floor(e.DynamicValue.resolve(t,r,s))))}minLength(t){return this.addStep(((r,s)=>r.minLength=Math.floor(e.DynamicValue.resolve(t,r,s))))}maxLength(t){return this.addStep(((r,s)=>r.maxLength=Math.floor(e.DynamicValue.resolve(t,r,s))))}}class wt extends i{copy(){return new wt(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("title")),t,e)}text(t){return this.addStep(((r,s)=>r.text=String(e.DynamicValue.resolve(t,r,s))))}}class Dt extends i{copy(){return new Dt(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("track")),t,e)}src(t){return this.addStep(((e,r)=>{const s="function"==typeof t?t(e,r):t;e.src=s instanceof URL?s.href:s}))}isDefault(t){return this.addStep(((r,s)=>r.default=e.DynamicValue.resolve(t,r,s)))}kind(t){return this.addStep(((r,s)=>r.kind=e.DynamicValue.resolve(t,r,s)))}label(t){return this.addStep(((r,s)=>r.label=e.DynamicValue.resolve(t,r,s)))}sourceLanguage(t){return this.addStep(((e,r)=>{const s="function"==typeof t?t(e,r):t;e.srclang="string"==typeof s?s:s.language}))}}!function(t){let e;!function(t){t.SUBTITLES="subtitles",t.CAPTIONS="captions",t.CHAPTERS="chapters",t.METADATA="metadata"}(e=t.Kind||(t.Kind={}))}(Dt||(Dt={}));const Rt=Dt;class vt extends i{copy(){return new vt(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("ul")),t,e)}type(t){return this.style({listStyleType:t})}}!function(t){let e;!function(t){t.NONE="none",t.DISC="disc",t.CIRCLE="circle",t.SQUARE="square",t.DECIMAL="decimal"}(e=t.Type||(t.Type={}))}(vt||(vt={}));const Tt=vt;class At extends o{copy(){return new At(this.defaultParameters,[...this.steps])}constructor(t,e=[]){super((()=>document.createElement("video")),t,e)}isPIPDisabled(t){return this.addStep(((r,s)=>r.disablePictureInPicture=e.DynamicValue.resolve(t,r,s)))}}class bt{constructor(){this.input=F.DEFAULT_CREATORS,this.link=$.DEFAULT_CREATORS,this.meta=Z.DEFAULT_CREATORS}a(t,e,r){let s=new a(t);return void 0!==e&&(s=s.href(e)),void 0!==r&&(s=s.openInNewTab(r)),s}audio(t,e,r){let s=new u(t);return void 0!==e&&(s=s.src(e)),void 0!==r&&(s=s.doLoop(r)),s}base(t,e,r){let s=new c(t);return void 0!==e&&(s=s.href(e)),void 0!==r&&(s=s.openInNewTab(r)),s}body(t){return new l(t)}br(t){return new h(t)}button(t,e,r){let s=new d(t);return void 0!==e&&(s=s.on("click",e)),void 0!==r&&(s=s.doDisable(r)),s}canvas(t,e,r){let s=new m(t);return void 0!==e&&(s=s.width(e)),void 0!==r&&(s=s.height(r)),s}data(t,e){let r=new p(t);return void 0!==e&&(r=r.value(e)),r}datalist(t,...e){let r=new f(t);return e&&(r=r.options(...e)),r}dialog(t,e){let r=new E(t);return void 0!==e&&(r=r.isOpen(e)),r}div(t,e,...r){let s=new S(t);return void 0!==e&&(s=s.id(e)),r&&(s=s.classes(...r)),s}dl(t){return new D(t)}embed(t){return new R(t)}fieldset(t,e){let r=new v(t);return void 0!==e&&(r=r.name(e)),r}form(t,e,r){let s=new A(t);return void 0!==e&&s.name(e),void 0!==r&&s.method(r),s}head(t){return new b(t)}h1(t,e){let r=new x(1,t);return void 0!==e&&(r=r.text(e)),r}h2(t,e){let r=new x(2,t);return void 0!==e&&(r=r.text(e)),r}h3(t,e){let r=new x(3,t);return void 0!==e&&(r=r.text(e)),r}h4(t,e){let r=new x(4,t);return void 0!==e&&(r=r.text(e)),r}h5(t,e){let r=new x(5,t);return void 0!==e&&(r=r.text(e)),r}h6(t,e){let r=new x(6,t);return void 0!==e&&(r=r.text(e)),r}hr(t){return new N(t)}html(t){return new L(t)}iframe(t,e){let r=new C(t);return void 0!==e&&(r=r.src(e)),r}img(t,e,r){let s=new M(t);return void 0!==e&&(s=s.src(e)),void 0!==r&&(s=s.alt(r)),s}label(t,e){let r=new W(t);return void 0!==e&&(r=r.for(e)),r}legend(t){return new B(t)}li(t){return new j(t)}menu(t){return new X(t)}meter(t){return new Q(t)}object(t,e,r){let s=new J(t);return void 0!==e&&(s=s.type(e)),void 0!==r&&(s=s.data(r)),s}optgroup(t,e,...r){let s=new tt(t);return void 0!==e&&(s=s.label(e)),s.options(...r)}option(t,e,r){let s=new et(e,t);return void 0!==r&&(s=s.text(r)),s}ol(t,e,r){let s=new st(t);return void 0!==e&&(s=s.type(e)),void 0!==r&&(s=s.isReversed(r)),s}output(t,e,...r){let s=new nt(t);return void 0!==e&&(s=s.value(e)),r&&(s=s.for(...r)),s}p(t,e){let r=new it(t);return void 0!==e&&(r=r.text(e)),r}picture(t){return new at(t)}pre(t){return new ot(t)}progress(t,e,r){let s=new ct(t);return void 0!==e&&(s=s.value(e)),void 0!==r&&(s=s.max(r)),s}script(t,e,r){let s=new ht(t);return void 0!==e&&(s=s.type(e)),void 0!==r&&(s=s.src(r)),s}select(t,...e){return new dt(t).options(...e)}source(t,e,r){let s=new pt(t);return void 0!==e&&(s=s.type(e)),void 0!==r&&(s=s.src(r)),s}span(t,e){let r=new ft(t);return void 0!==e&&(r=r.style(e)),r}style(t){return new Et(t)}table(t){return new St(t)}caption(t){return new yt(t)}textarea(t,e){let r=new gt(t);return void 0!==e&&(r=r.text(e)),r}title(t,e){let r=new wt(t);return void 0!==e&&(r=r.text(e)),r}track(t,e,r){let s=new Rt(t);return void 0!==e&&(s=s.kind(e)),void 0!==r&&(s=s.src(r)),s}ul(t,e){let r=new Tt(t);return void 0!==e&&(r=r.type(e)),r}video(t){return new At(t)}}bt.INSTANCE=new bt;const It=bt;var xt;!function(t){t.cast=function(t,e){return r=>{if(!t(r))throw new TypeError(e?`value ${r} is not of type ${e}`:`value ${r} is of an invalid type`);return r}}}(xt||(xt={}));const Nt=xt,Lt=/^-?[0-9]+(\.[0-9]+)?(e-?[0-9]+)?$/;function Ct(t){const e=Object.keys(t).filter((t=>!Lt.test(t))).map((e=>t[e]));return t=>e.includes(t)}class Ot{constructor(t,e){this.x=t,this.y=e}add(t){return new Ot(this.x+t.x,this.y+t.y)}sub(t){return new Ot(this.x-t.x,this.y-t.y)}mult(t,e=Ot.VectorMultKind.HADAMARD){switch(e){case Ot.VectorMultKind.DOT:return this.x*t.x+this.y*t.y;case Ot.VectorMultKind.HADAMARD:return new Ot(this.x*t.x,this.y*t.y);default:throw new Error("invalid vector multiplication type: "+e)}}div(t){return new Ot(this.x/t.x,this.y/t.y)}scale(t){return new Ot(this.x*t,this.y*t)}magnitude(){return Math.sqrt(this.mult(this,Ot.VectorMultKind.DOT))}normalized(){return this.copy().scale(1/this.magnitude())}heading(){return Math.atan2(this.y,this.x)}rotate(t){return Ot.fromPolar(this.heading()+t,this.magnitude())}equals(t){return this.x===t.x&&this.y===t.y}copy(){return new Ot(this.x,this.y)}static fromPoint(t){return new Ot(t.x,t.y)}static fromPolar(t,e){return new Ot(Math.cos(t)*e,Math.sin(t)*e)}}Ot.ZERO=new Ot(0,0),function(t){let e;!function(t){t[t.DOT=0]="DOT",t[t.HADAMARD=1]="HADAMARD"}(e=t.VectorMultKind||(t.VectorMultKind={}))}(Ot||(Ot={}));const Pt=Ot;class Vt{get area(){return this.width*this.height}constructor(t,e){this.width=t,this.height=e}scale(t){return new Vt(this.width*t,this.height*t)}mult(t){return new Vt(this.width*t.width,this.height*t.height)}div(t){return new Vt(this.width/t.width,this.height/t.height)}abs(){return new Vt(Math.abs(this.width),Math.abs(this.height))}getCorner(){return new Pt(this.width,this.height)}equals(t){return this.width===t.width&&this.height===t.height}copy(){return new Vt(this.width,this.height)}static fromSize(t){return new Vt(t.width,t.height)}static fromCorner(t){return new Vt(t.x,t.y)}}class Mt{constructor(t,e){this.center=t,this.dim=e}get left(){return this.center.x-this.dim.width/2}get right(){return this.center.x+this.dim.width/2}get top(){return this.center.y-this.dim.height/2}get bottom(){return this.center.y+this.dim.height/2}get topLeft(){return new Pt(this.left,this.top)}get topRight(){return new Pt(this.right,this.top)}get bottomLeft(){return new Pt(this.left,this.bottom)}get bottomRight(){return new Pt(this.right,this.bottom)}contains(t){return t.x>=this.left&&t.x<=this.right&&t.y>=this.top&&t.y<=this.bottom}clamp(t){return new Pt(ut.clamp(t.x,this.left,this.right),ut.clamp(t.y,this.top,this.bottom))}projectOntoPerimeter(t){return new Pt(t.x<this.center.x?this.left:this.right,t.y<this.center.y?this.top:this.bottom)}copy(){return new Mt(this.center.copy(),this.dim.copy())}static fromCorners(t,e){const r=new Pt(Math.min(t.x,e.x),Math.min(t.y,e.y)),s=new Pt(Math.max(t.x,e.x),Math.max(t.y,e.y));return new Mt(r.add(s).scale(.5),Vt.fromCorner(s.sub(r)))}static fromElement(t){const e=t.getBoundingClientRect();return new Mt(new Pt(e.x+e.width/2,e.y+e.height/2),Vt.fromSize(e))}}class Ht extends Mt{constructor(t,e,r){super(t,e),this.rotation=r}get topLeft(){return this.toGlobalSpace({x:-.5,y:-.5})}get topRight(){return this.toGlobalSpace({x:.5,y:-.5})}get bottomLeft(){return this.toGlobalSpace({x:-.5,y:.5})}get bottomRight(){return this.toGlobalSpace({x:.5,y:.5})}toLocalSpace(t){return Pt.fromPoint(t).sub(this.center).rotate(-this.rotation).div(this.dim.getCorner())}toGlobalSpace(t){return Pt.fromPoint(t).mult(this.dim.getCorner()).rotate(this.rotation).add(this.center)}copy(){return new Ht(this.center.copy(),this.dim.copy(),this.rotation)}}var Ft;const Ut=/^[a-z]+(-[a-z]+)*$/;function _t(t){if(!Ut.test(t))throw new SyntaxError(`name "${t}" does not match ${Ut}`);return`/styles/custom-elements/${t}.css`}var Gt;!function(t){t[t.PENDING=0]="PENDING",t[t.INITIALIZED=1]="INITIALIZED",t[t.FAILED=2]="FAILED"}(Gt||(Gt={}));class zt extends HTMLElement{constructor(){super(...arguments),this.initState=Gt.PENDING,this.initResolvers=new Set,this.initRejectors=new Set}static loadStylesheet(t){return this.loadedTagNames.has(t)?Promise.resolve():new Promise(((e,r)=>{const s=document.createElement("link");s.rel="stylesheet",s.addEventListener("load",(()=>e())),s.addEventListener("error",r),s.href=_t(t),window.addEventListener("DOMContentLoaded",(()=>document.head.appendChild(s)))}))}onceInitialized(){const{promise:t,resolve:e,reject:r}=Promise.withResolvers();switch(this.initState){case Gt.PENDING:this.initResolvers.add(e),this.initRejectors.add(r);break;case Gt.INITIALIZED:e(this);break;case Gt.FAILED:r(this.initErr)}return t}connectedCallback(){(this.initElement()??Promise.resolve()).then((()=>{for(const t of this.initResolvers)t(this);this.initState=Gt.INITIALIZED})).catch((t=>{this.initErr=t;for(const t of this.initRejectors)t(this.initErr);this.initState=Gt.FAILED})).finally((()=>{this.initResolvers.clear(),this.initRejectors.clear()}))}initElement(){console.warn("initElement method is not overridden for "+this.constructor.name)}on(t,e){return this.addEventListener(t,(t=>e(t,this))),this}once(t){return new Promise((e=>{this.addEventListener(t,(t=>e([t,this])),{once:!0})}))}onAttributeChanged(t,e,r=!1){new MutationObserver((r=>{for(const s of r)if("attributes"===s.type){const r=this.getAttribute(t);r!==s.oldValue&&e(r,s.oldValue,this)}})).observe(this,{attributes:!0,attributeOldValue:!0,attributeFilter:[t]}),r&&e(this.getAttribute(t),null,this)}}Ft=zt,zt.loadedTagNames=new Set,(()=>{const t=customElements.define.bind(customElements);customElements.define=(e,r,s)=>{let n=r;for(;n;){if(n===Ft){Ft.loadStylesheet(e).then((()=>console.info(`Loaded stylesheet for "${e}"`))).catch((()=>console.warn(`Failed to load stylesheet for "${e}". Make sure to have a CSS stylesheet at ${_t(e)}`))).finally((()=>Ft.loadedTagNames.add(e)));break}n=Object.getPrototypeOf(n)}return t(e,r,s)}})();const kt=zt,Wt=It.INSTANCE;class Bt extends kt{get isControlsVisible(){return this.hasAttribute("controls-visible")}set isControlsVisible(t){this.toggleAttribute("controls-visible",t)}get lockAspectRatio(){return this.hasAttribute("lock-aspect-ratio")}set lockAspectRatio(t){this.toggleAttribute("lock-aspect-ratio",t)}constructor(){super(),this.transform=new Ht(new Pt(0,0),new Vt(.25,.25),0)}initElement(){this.toggleAttribute("transformable",!0),this.refreshCSSVars();let t=!1,e=!1,r=Pt.ZERO;window.addEventListener("mousedown",(s=>{t=!0,r=Bt.getMouseOffset(s,this).div(Bt.CANVAS_BOUNDS.dim.getCorner()).mult(this.transform.dim.getCorner()),this.isControlsVisible=s.target instanceof Node&&this.contains(s.target),e=s.target===this})),window.addEventListener("mousemove",(s=>{e&&t&&(this.transform.center=Bt.CANVAS_BOUNDS.clamp(Bt.getMouseOffset(s,this.parentElement).sub(r)),this.dispatchEvent(new Event("move")),this.refreshCSSVars())})),window.addEventListener("mouseup",(()=>t=!1));const s=Wt.div({widthDir:Bt.WidthResizeDir.NONE,heightDir:Bt.HeightResizeDir.NONE},void 0,"resize-handle").attribute("width-resize-dir",((t,e)=>e.widthDir)).attribute("height-resize-dir",((t,e)=>e.heightDir)).on("mousedown",((t,e)=>{e.toggleAttribute("selected",!0),document.body.style.cursor=e.style.cursor,this.style.cursor=e.style.cursor})).do((t=>window.addEventListener("mouseup",(()=>{t.removeAttribute("selected"),document.body.style.cursor="",this.style.cursor=""})))).do(((t,e)=>window.addEventListener("mousemove",(r=>{if(t.hasAttribute("selected")){const t=Bt.CANVAS_BOUNDS.clamp(Bt.getMouseOffset(r,this.parentElement)),s=this.transform.toLocalSpace(t),n=Pt.ZERO.copy();e.widthDir===Bt.WidthResizeDir.LEFT?(n.x=.5,s.x=Math.min(s.x,n.x-Bt.MIN_WIDTH/this.transform.dim.width)):e.widthDir===Bt.WidthResizeDir.RIGHT&&(n.x=-.5,s.x=Math.max(s.x,n.x+Bt.MIN_WIDTH/this.transform.dim.width)),e.heightDir===Bt.HeightResizeDir.UP?(n.y=.5,s.y=Math.min(s.y,n.y-Bt.MIN_HEIGHT/this.transform.dim.height)):e.heightDir===Bt.HeightResizeDir.DOWN&&(n.y=-.5,s.y=Math.max(s.y,n.y+Bt.MIN_HEIGHT/this.transform.dim.height));const i=this.transform.dim.width/this.transform.dim.height,a=Mt.fromCorners(n,s);e.widthDir===Bt.WidthResizeDir.NONE?(a.dim.width=this.lockAspectRatio?a.dim.height*i:1,a.center.x=0):e.heightDir===Bt.HeightResizeDir.NONE&&(a.dim.height=this.lockAspectRatio?a.dim.width/i:1,a.center.y=0);const o=this.transform.toGlobalSpace(a.center);Bt.CANVAS_BOUNDS.clamp(o),this.transform.rotation=this.transform.rotation,this.transform.center=o,this.transform.dim=a.dim.mult(this.transform.dim),this.dispatchEvent(new Event("resize")),this.refreshCSSVars()}})))).do(((t,e)=>this.addEventListener("rotate",(()=>{const r=Bt.getHeading(e.widthDir,e.heightDir)+this.transform.rotation,s=Math.round(r/(Math.PI/4)+4)%4;t.style.cursor=["ew-resize","nwse-resize","ns-resize","nesw-resize"][s]}))));this.append(s.make({widthDir:Bt.WidthResizeDir.LEFT,heightDir:Bt.HeightResizeDir.UP}),s.make({widthDir:Bt.WidthResizeDir.NONE,heightDir:Bt.HeightResizeDir.UP}),s.make({widthDir:Bt.WidthResizeDir.RIGHT,heightDir:Bt.HeightResizeDir.UP}),s.make({widthDir:Bt.WidthResizeDir.LEFT,heightDir:Bt.HeightResizeDir.NONE}),s.make({widthDir:Bt.WidthResizeDir.RIGHT,heightDir:Bt.HeightResizeDir.NONE}),s.make({widthDir:Bt.WidthResizeDir.LEFT,heightDir:Bt.HeightResizeDir.DOWN}),s.make({widthDir:Bt.WidthResizeDir.NONE,heightDir:Bt.HeightResizeDir.DOWN}),s.make({widthDir:Bt.WidthResizeDir.RIGHT,heightDir:Bt.HeightResizeDir.DOWN})),this.dispatchEvent(new Event("rotate")),this.append(Wt.div({},void 0,"rotate-handle-line").make(),Wt.p({},"refresh").classes("icon","rotate-handle").style({display:"none"}).on("mousedown",((t,e)=>e.toggleAttribute("selected",!0))).do((t=>window.addEventListener("mouseup",(()=>t.removeAttribute("selected"))))).do((t=>window.addEventListener("mousemove",(e=>{if(t.hasAttribute("selected")){const t=Bt.getMouseOffset(e,this.parentElement);this.transform.rotation=t.sub(this.transform.center).heading()+Math.PI/2,this.dispatchEvent(new Event("rotate")),this.refreshCSSVars()}})))).make())}refreshCSSVars(){this.style.setProperty("--transform-position-x",100*this.transform.center.x+"%"),this.style.setProperty("--transform-position-y",100*this.transform.center.y+"%"),this.style.setProperty("--transform-size-width",100*Math.abs(this.transform.dim.width)+"%"),this.style.setProperty("--transform-size-height",100*Math.abs(this.transform.dim.height)+"%"),this.style.setProperty("--transform-rotation",this.transform.rotation+"rad")}static getMouseOffset(t,e){const r=Mt.fromElement(e);return Pt.fromPoint(t).sub(r.center).div(r.dim.getCorner())}}Bt.CANVAS_BOUNDS=new Mt(new Pt(0,0),new Vt(1,1)),Bt.MIN_WIDTH=.05,Bt.MIN_HEIGHT=.05,kt.loadStylesheet("transformable"),function(t){let e,r;!function(t){t.NONE="none",t.LEFT="left",t.RIGHT="right"}(e=t.WidthResizeDir||(t.WidthResizeDir={})),function(t){t.NONE="none",t.UP="up",t.DOWN="down"}(r=t.HeightResizeDir||(t.HeightResizeDir={})),t.getHeading=function(t,s){const n=Pt.ZERO.copy();return t===e.LEFT?n.x=-1:t===e.RIGHT&&(n.x=1),s===r.UP?n.y=-1:s===r.DOWN&&(n.y=1),n.heading()}}(Bt||(Bt={}));const jt=Bt,Kt=It.INSTANCE;class $t extends jt{get src(){return this.getAttribute("src")}set src(t){t?this.setAttribute("src",t):this.removeAttribute("src")}get fit(){return $t.castToFit(this.getAttribute("fit"))}set fit(t){this.setAttribute("fit",t)}initElement(){this.hasAttribute("fit")||(this.fit=$t.Fit.FILL);const t=this.appendChild(Kt.img({},this.src??$t.DEFAULT_SRC).make());this.onAttributeChanged("src",(()=>t.src=this.src??$t.DEFAULT_SRC)),this.onAttributeChanged("fit",(()=>t.style.objectFit=this.fit)),super.initElement()}}$t.DEFAULT_SRC="/images/placeholder.svg",function(t){let e;!function(t){t.CONTAIN="contain",t.COVER="cover",t.FILL="fill",t.SCALE_DOWN="scale-down"}(e=t.Fit||(t.Fit={})),t.castToFit=Nt.cast(Ct(e),"TransformableImage.Fit")}($t||($t={})),customElements.define("transformable-image",$t);class Yt extends Error{constructor(t){t=t?.trim(),super(t?"missing attribute: "+t:"missing attribute")}}class Xt{constructor(t,e,r,s=255){this.r=t,this.g=r,this.b=e,this.a=s}toHex(){return"#"+(255==this.a?[this.r,this.g,this.b]:[this.r,this.g,this.b,this.a]).map((t=>t.toString(16).padStart(2,"0"))).join("").toUpperCase()}static fromHex(t){if(!t.startsWith("#"))throw new SyntaxError("hex color string does not start with a '#'");if((t=t.substring(1)).length%2!=0||t.length<6||t.length>8)throw new SyntaxError("incorrect number of encoding characters: "+t.length);return new Xt(Number.parseInt(t.substring(0,2),16),Number.parseInt(t.substring(2,4),16),Number.parseInt(t.substring(4,6),16),Number.parseInt(t.substring(6,8)||"FF",16))}}const qt=It.INSTANCE;class Zt extends jt{get type(){return Zt.castToType(this.getAttribute("type"))}set type(t){this.setAttribute("type",t)}get color(){if(!this.hasAttribute("color"))throw new Yt("color");return Xt.fromHex(this.getAttribute("color"))}set color(t){this.setAttribute("color",t.toHex()),this.refreshCSSVars()}initElement(){this.hasAttribute("type")||(this.type=Zt.Type.SQUARE),this.appendChild(qt.div({},void 0,"shape").make()),this.onAttributeChanged("type",(()=>{const t=Zt.WIDTH_HEIGHT_RATIOS[this.type];if(void 0===t)this.lockAspectRatio=!1;else{const e=new Vt(this.transform.dim.width,this.transform.dim.width/t),r=new Vt(this.transform.dim.height*t,this.transform.dim.height);this.transform.dim=e.area<=r.area?e:r,this.lockAspectRatio=!0,this.refreshCSSVars()}}),!0),this.onAttributeChanged("color",(()=>this.refreshCSSVars())),super.initElement()}refreshCSSVars(){super.refreshCSSVars(),this.style.setProperty("--shape-fill-color",this.color.toHex())}}!function(t){let e;!function(t){t.SQUARE="square",t.RECTANGLE="rectangle",t.ROUNDED_RECTANGLE="rounded-rectangle",t.CIRCLE="circle",t.ELLIPSE="ellipse",t.TRIANGLE="triangle",t.RIGHT_TRIANGLE="right-triangle"}(e=t.Type||(t.Type={})),t.WIDTH_HEIGHT_RATIOS=Object.freeze({[e.SQUARE]:1,[e.RECTANGLE]:void 0,[e.ROUNDED_RECTANGLE]:void 0,[e.CIRCLE]:1,[e.ELLIPSE]:void 0,[e.TRIANGLE]:void 0,[e.RIGHT_TRIANGLE]:void 0}),t.castToType=Nt.cast(Ct(e),"TransformableShape.type")}(Zt||(Zt={})),customElements.define("transformable-shape",Zt);class Qt extends Error{constructor(t){t=t?.trim(),super(t?"missing element: "+t:"missing element")}}const Jt=It.INSTANCE;class te extends jt{get text(){if(!this.paragraphElement)throw new Qt("missing <p> element");return this.paragraphElement.innerText}set text(t){if(!this.paragraphElement)throw new Qt("missing <p> element");this.paragraphElement.innerText=t}get color(){if(!this.hasAttribute("color"))throw new Yt("color");return Xt.fromHex(this.getAttribute("color"))}set color(t){this.setAttribute("color",t.toHex()),this.refreshCSSVars()}get styles(){const t=new Set;for(const e of te.ALL_STYLES)this.classList.contains(e)&&t.add(e);return t}set styles(t){for(const e of te.ALL_STYLES)this.classList.toggle(e,t.has(e))}get fontFamily(){return this.hasAttribute("font-family")?te.castToFontFamily(this.getAttribute("font-family")):te.FontFamily.SANS_SERIF}set fontFamily(t){this.setAttribute("font-family",t)}get alignment(){return this.hasAttribute("alignment")?te.castToAlignment(this.getAttribute("alignment")):te.Alignment.LEFT}set alignment(t){this.setAttribute("alignment",t)}initElement(){return new Promise((t=>requestAnimationFrame((()=>{const e=this.innerText;this.innerText="",this.paragraphElement=this.appendChild(Jt.p({},e).classes("text").make()),super.initElement(),t(),console.log(this.styles)}))))}refreshCSSVars(){this.style.setProperty("--text-fill-color",this.color.toHex()),this.style.setProperty("--text-font-family",this.fontFamily),this.style.setProperty("--text-alignment",this.alignment),super.refreshCSSVars()}}!function(t){let e,r,s;!function(t){t.BOLD="bold",t.ITALIC="italic",t.UNDERLINE="underline",t.STRIKETHROUGH="strikethrough"}(e=t.Style||(t.Style={})),t.ALL_STYLES=Object.values(e),t.castToStyle=Nt.cast(Ct(e),"TransformableText.Style"),function(t){t.SERIF="serif",t.SANS_SERIF="sans-serif",t.MONOSPACE="monospace",t.CURSIVE="cursive",t.FANTASY="fantasy"}(r=t.FontFamily||(t.FontFamily={})),t.castToFontFamily=Nt.cast(Ct(r),"TransformableText.FontFamily"),function(t){t.LEFT="left",t.CENTER="center",t.RIGHT="right",t.JUSTIFY="justify"}(s=t.Alignment||(t.Alignment={})),t.castToAlignment=Nt.cast(Ct(s),"TransformableText.Alignment")}(te||(te={})),customElements.define("transformable-text",te)})();